<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">









 


   
  
  


<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/apis/earth/articles/domintro.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>DOM Part I: An Introduction to the Earth API Document Object Model - Google Earth API - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/apis/earth/documentation/_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="../../../css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="../../../js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../../css/iehacks.css"><![endif]-->

  </head>

  <body class="gc-documentation">

    
    
    <div id="gb">
 <span>
  
    <a id="lang-dropdown" class="dropdown" href="http://code.google.com" onclick="return false;"><img width="13" height="13" class="globeicon" src="../../../images/globe2_small.png"
     ><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  <a href="#gc-pagecontent">Skip to page content</a>
  <a href="#gc-toc">Skip to main navigation</a>
</div>

<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
  
     <img src="../../../images/code_logo.png" height="40" width="161" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "ajax apis" or "open source"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->



<h2 id="googlecode-promo">Make web development faster with these <a href="http://chrome.google.com/extensions/featured/web_dev" onclick="siteTracker._trackEvent('Promos','Web Development',this.href);">Chrome Extensions</a>!</h2>

</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google Earth API</h1>
  <ul id="articles" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="../index.html" title="Google Earth API home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="../documentation/index.html" title="Official Google Earth API documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../faq.html" title="Answers to frequently asked questions about Google Earth API">FAQ</a>
    </li>
  
    <li id="articles_link">
      <a href="index.html" class="selected" title="Focused articles and tutorials for Google Earth API developers">Articles</a>
    </li>
  
    <li>
      <a href="http://googlegeodevelopers.blogspot.com/" title="Official Google Earth API blog">Blog</a>
    </li>
  
    <li>
      <a href="http://groups.google.com/group/google-earth-browser-plugin/topics" title="Google Earth API developer forum">Forum</a>
    </li>
  
    <li>
      <a href="http://code.google.com/apis/maps/terms.html" title="Google Earth API terms of service">Terms</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-170">

      <a name="gc-toc"></a>
      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li><a href="http://code.google.com/apis/maps/signup.html">Sign up for a Maps API key</a></li>
</ul>

<div class="line"></div>

<ul>

  <li>
    <h2><a href="../documentation/reference/#">API Reference</a></h2>
    <div class="line"></div>
  </li>
  <li><h2>Developer's Guide</h2>
    <ul>
      <li><a href="../documentation/index.html">Introduction</a></li>
      <li><a href="../documentation/placemarks.html">Placemarks</a></li>
      <li><a href="../documentation/balloons.html">Balloons</a></li>
      <li><a href="../documentation/geometries.html">Geometries & Overlays</a></li>
      <li><a href="../documentation/camera_control.html">Camera Control</a></li>
      <li><a href="../documentation/layers.html">Layers & Controls</a></li>
      <li><a href="../documentation/time.html">Time</a> <sup class="new">Updated</sup></li>
      <li><a href="../documentation/ocean.html">Ocean</a></li>
      <li><a href="../documentation/sky_mars_moon.html">Sky, Mars, & Moon</a></li>
      <li><a href="../documentation/touring.html">Touring</a></li>
      <li><a href="../documentation/events.html">Events</a></li>
      <li><a href="../documentation/accessors.html">Accessors</a> <sup class="new">New!</sup></li>
      <li><a href="../documentation/containers.html">Object Containers</a></li>
      <li><a href="../documentation/kml.html">KML</a></li>
      <li><a href="../documentation/options.html">Options</a></li>
      <li><a href="../documentation/debugging.html">Debugging</a></li>
    </ul>
  </li>
        
  <div class="line"></div>
    
  <li><h2 class="tlw-expanded">Code Samples</h2>
    <ul>
      <li><a href="../documentation/examples.html">Examples</a></li>
      <li><a href="../documentation/demogallery.html">Demo Gallery</a>
      </li>
      <li><a href="http://code.google.com/apis/ajax/playground/?exp=earth">Code Playground</a></li>
    </ul>
  </li>
    
  <div class="line"></div>
    
  <li><h2 class="tlw-expanded">More Resources</h2>
    <ul>
      <li><a href="../documentation/mediagallery.html">Media</a></li>
      <li><a href="../documentation/releasenotes.html">Release Notes</a></li>
      <li><a href="http://code.google.com/p/earth-api-utility-library">Utility Library</a></li>
      <li><a href="http://code.google.com/p/earth-api-samples/issues/list?q=label%3AType-Defect">Known Issues</a></li>
    </ul>
  </li>
</ul>

<div class="line"></div>
<ul>
 <li>
    <h2>Related Docs</h2>
    <ul>                
      <li><a href="http://code.google.com/apis/kml/documentation/index.html">KML</a></li>
      <li><a href="http://code.google.com/apis/maps/documentation/index.html">Maps API</a></li>
    </ul>                
 </li>
</ul>
        <a class="hidden" href="#gc-topnav">More Google Earth API resource links</a>
      </div>

      <a name="gc-pagecontent"></a>
      <div class="g-unit" id="gc-pagecontent">
        <h1 class="page_title">DOM Part I: An Introduction to the Earth API Document Object Model</h1>


<!-- ########## PAGE CONTENT ########## -->

<p>
  <em>Roman Nurik, Google Geo APIs Team</em><br/>
  <em>August 2009</em>
</p>

<h2>Contents</h2>
<div class="toc">
<ol>
<li><a href="#objective">Objective &amp; Prerequisites</a></li>
<li><a href="#whatisdom">What is the W3C DOM?</a><ol>
  <li><a href="#whatisdom-html">Web browser DOMs (HTML)</a></li>
  <li><a href="#whatisdom-kml">Google Earth Plugin DOMs (KML)</a></li>
</ol></li>
<li><a href="#analogies">DOM analogies between web browsers and the Google Earth Plugin</a><ol>
  <li><a href="#analogies-concepts">Conceptual analogies</a></li>
  <li><a href="#analogies-access">Document access code</a></li>
  <li><a href="#analogies-manipulation">Document manipulation code</a></li>
</ol></li>
<li><a href="#conclusion">Next steps</a></li>
</ol>
</div>

<div id="objective">
<h1>Objective &amp; Prerequisites</h1>

<p>In the article <a href="earthapikml.html">An Overview of Using KML in the
Earth API</a>, I briefly discuss the idea of the Earth API's <acronym
title="Keyhole Markup Language">KML</acronym> Document Object Model (DOM) and
its similarities to the HTML DOM specification adopted by modern web browsers.
In this article, we'll discuss these similarities and analogies in more
detail.</p>

<p>This article assumes you are familiar with JavaScript and know the basics of
the Earth API. Make sure you have read the <a
href="../documentation/index.html">Developer's Guide</a> and have tried
the <a
href="http://earth-api-samples.googlecode.com/svn/trunk/demos/helloearth/index.html">Hello,
Earth Demo</a> before you continue.</p>

</div>

<div id="whatisdom">
<h1>What is the W3C DOM?</h1>

<p>As defined by the <a href="http://www.w3.org">World Wide Web Consortium</a>
(W3C), the leading standards body in web and related technologies, the Document
Object Model (DOM) is:</p>

<blockquote>
&quot;a platform- and language-neutral interface that will allow programs
and scripts to dynamically access and update the content, structure and style of
documents. The document can be further processed and the results of that
processing can be incorporated back into the presented page.&quot;
</blockquote>

<p>In short, the W3C Document Object Model is <strong>a recommendation for
interfaces for accessing, updating, and reading documents</strong>&mdash;with an
emphasis on hierarchically structured documents. It defines concepts such as
nodes, elements and attributes, and recommends constructs for node access like
<code>firstChild</code>, <code>parentNode</code>, <code>appendChild</code>,
etc.</p>

<p>For a more in-depth tutorial on the W3C DOM recommendation, see <a
href="http://www.quirksmode.org/dom/intro.html">this article on QuirksMode</a>.
</p>

</div>

<div id="whatisdom-html">
<h3>Web browser DOMs (HTML)</h3>

<p>Modern web browsers implement the DOM specification to expose a web page's
HTML document tree via native classes in their JavaScript interpreters, such as
<code>HTMLDivElement</code>. Developers can thus write JavaScript code to access
and manipulate HTML programmatically.</p>

<p>If you've done any JavaScript web development before, then chances are you've
already used a web browser's implementation of the DOM spec. For example,
commonly used code like the following HTML and JavaScript:</p>

<pre class="prettyprint lang-html">
&lt;div id="mydiv"&gt;...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
var myDiv = document.getElementById('mydiv');
</pre>

<p>uses the standard <code>getElementById</code> method, defined in the <a
href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/idl-definitions.html">DOM
Level 2 specification</a>, to search through a web page's current HTML document
for the element with the given ID.</p>

</div>

<div id="whatisdom-kml">
<h3>Google Earth Plugin DOMs (KML)</h3>

<p>Much like web browsers expose DOM interfaces for HTML documents in their
JavaScript implementations, <strong>Google Earth Plugin instances expose W3C
DOM-like interfaces for the KML content they contain via the Earth API</strong>.
</p>

<p>So, while web browsers expose interfaces for accessing a
<code>&lt;div&gt;</code> and its subtree via <code>mydiv.childNodes</code>, the
Google Earth Plugin exposes Earth API interfaces for accessing
<code>&lt;Placemark&gt;</code> objects and their tree via
<code>placemark.getGeometry</code> and interfaces for accessing a
<code>&lt;Folder&gt;</code> and its children via
<code>folder.getFeatures().getChildNodes()</code>.</p>

<p>The next sections highlight several key analogies between the HTML and KML
DOMs discussed in the past two sections.</p>

</div>

<div id="analogies">
<h1>DOM analogies between web browsers and the Google Earth Plugin</h1>
</div>

<div id="analogies-concepts">
<h3>Conceptual analogies</h3>

<table border="1">
<thead valign="bottom">
<tr>
  <th>&nbsp;</th>
  <th>Web browsers</th>
  <th>Google Earth Plugin</th>
</tr>
</thead>
<tbody valign="top">
<tr>
  <td>Exposed document type</td>
  <td>HTML</td>
  <td>KML</td>
</tr>
<tr>
  <td>Exposed via</td>
  <td>the web browser's native JavaScript implementation</td>
  <td>the Google Earth API (JavaScript based)</td>
</tr>
<tr>
  <td>Root interface</td>
  <td><a href="http://web5.w3.org/TR/DOM-Level-2-HTML/html.html#ID-26809268">HTMLDocument</a></td>
  <td><a href="../documentation/reference/interface_g_e_plugin.html">GEPlugin</a></td>
</tr>
<tr>
  <td>Example interfaces</td>
  <td>
    <a href="http://web5.w3.org/TR/DOM-Level-2-HTML/html.html#ID-33759296">HTMLHtmlElement</a>,
    <a href="http://web5.w3.org/TR/DOM-Level-2-HTML/html.html#ID-22445964">HTMLDivElement</a>,
    <a href="http://web5.w3.org/TR/DOM-Level-2-HTML/html.html#ID-17701901">HTMLImageElement</a>, etc.
  </td>
  <td>
    <a href="../documentation/reference/interface_kml_document.html">KmlDocument</a>,
    <a href="../documentation/reference/interface_kml_placemark.html">KmlPlacemark</a>,
    <a href="../documentation/reference/interface_kml_ground_overlay.html">KmlGroundOverlay</a>, etc.
  </td>
</tr>
<tr>
  <td>Example elements</td>
  <td><code>&lt;html&gt;</code>, <code>&lt;div&gt;</code>, <code>&lt;img&gt;</code>, etc.</td>
  <td><code>&lt;Document&gt;</code>, <code>&lt;Placemark&gt;</code>, <code>&lt;GroundOverlay&gt;</code>, etc.</td>
</tr>
</tbody>
</table>

</div>

<div id="analogies-access">
<h3>Document access code</h3>

<table border="1">
<thead valign="bottom">
<tr>
  <th>&nbsp;</th>
  <th>Web browsers</th>
  <th>Google Earth Plugin</th>
</tr>
</thead>
<tbody valign="top">
<tr>
  <td>Get the <em>n</em>th child</td>
  <td><code>mydiv.childNodes[4]</code></td>
  <td><code>folder.getFeatures().getChildNodes().item(4)</code></td>
</tr>
<tr>
  <td>Get a node's next sibling</td>
  <td><code>mydiv.nextSibling</code></td>
  <td><code>placemark.getNextSibling()</code></td>
</tr>
<tr>
  <td>Get a node's parent</td>
  <td><code>mydiv.parentNode</code></td>
  <td><code>placemark.getParentNode()</code></td>
</tr>
</tbody>
</table>

</div>

<div id="analogies-manipulation">
<h3>Document manipulation code</h3>

<table border="1">
<thead valign="bottom">
<tr>
  <th>&nbsp;</th>
  <th>Web browsers</th>
  <th>Google Earth Plugin</th>
</tr>
</thead>
<tbody valign="top">
<tr>
  <td>Creating an element</td>
  <td><code>document.createElement('DIV')</code></td>
  <td><code>ge.createPlacemark('')</code></td>
</tr>
<tr>
  <td>Inserting an element</td>
  <td><code>mydiv.insertBefore(newdiv, otherdiv)</code></td>
  <td><code>folder.getFeatures().insertBefore(placemark, otherplacemark)</code></td>
</tr>
<tr>
  <td>Removing an element</td>
  <td><code>mydiv.parentNode.removeChild(mydiv)</code></td>
  <td><code>placemark.getParentNode().getFeatures().removeChild(placemark)</code></td>
</tr>
</tbody>
</table>

</div>

<div id="conclusion">
<h1>Next steps</h1>

<p>To see how these concepts can be used to implement common patterns for
for traversing KML document hierarchies, read the next article in this
series: <a href="domtraversal.html">Part II: Using the GEarthExtensions Utility Library for Easy DOM Manipulation</a>.</p>

<p>To learn more about the W3C DOM spec., check out the <a
href="http://www.w3.org/DOM/">W3C Document Object Model documentation</a> or the
<a href="http://www.w3.org/DOM/DOMTR">W3C DOM Technical Reports</a>.</p>

<p>To learn more about DOM methods in the Earth API, visit the <a
href="../documentation/containers.html">Object Containers</a> section
of the <a href="../documentation/index.html">Developer's Guide</a>.</p>

</div>

<!-- ########## END PAGE CONTENT ########## -->


      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
    &copy;2010 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://code.google.com/terms.html">Terms of Service</a> -
    <a href="http://code.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://code.google.com/more">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="http://code.google.com/intl/en">English</a> -
    <a href="http://code.google.com/intl/es">Español</a> -
    <a href="http://code.google.com/intl/ja">日本語</a> -
    <a href="http://code.google.com/intl/ko">한국어</a> -
    <a href="http://code.google.com/intl/pt-BR">Português</a> -
    <a href="http://code.google.com/intl/ru">Pусский</a> -
    <a href="http://code.google.com/intl/zh-CN">中文(简体)</a> -
    <a href="http://code.google.com/intl/zh-TW">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="../../../js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>

