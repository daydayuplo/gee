<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">









 


   
  
  


<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/apis/earth/documentation/developer_channel.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Developer Channel - Google Earth API - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/apis/earth/documentation/_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="../../../css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="../../../js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../../css/iehacks.css"><![endif]-->

    <link href="../../../css/semantic_headers.css" rel="stylesheet" type="text/css" />
       <script src="addCommentsToToc.js" type="text/javascript"></script>
  </head>

  <body class="gc-documentation">

    
    
    <div id="gb">
 <span>
  
    <a id="lang-dropdown" class="dropdown" href="http://code.google.com" onclick="return false;"><img width="13" height="13" class="globeicon" src="../../../images/globe2_small.png"
     ><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  <a href="#gc-pagecontent">Skip to page content</a>
  <a href="#gc-toc">Skip to main navigation</a>
</div>

<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
  
     <img src="../../../images/code_logo.png" height="40" width="161" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "ajax apis" or "open source"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->



<h2 id="googlecode-promo">Make web development faster with these <a href="http://chrome.google.com/extensions/featured/web_dev" onclick="siteTracker._trackEvent('Promos','Web Development',this.href);">Chrome Extensions</a>!</h2>

</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google Earth API</h1>
  <ul id="docs" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="../index.html" title="Google Earth API home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="index.html" class="selected" title="Official Google Earth API documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../faq.html" title="Answers to frequently asked questions about Google Earth API">FAQ</a>
    </li>
  
    <li id="articles_link">
      <a href="../articles/index.html" title="Focused articles and tutorials for Google Earth API developers">Articles</a>
    </li>
  
    <li>
      <a href="http://googlegeodevelopers.blogspot.com/" title="Official Google Earth API blog">Blog</a>
    </li>
  
    <li>
      <a href="http://groups.google.com/group/google-earth-browser-plugin/topics" title="Google Earth API developer forum">Forum</a>
    </li>
  
    <li>
      <a href="http://code.google.com/apis/maps/terms.html" title="Google Earth API terms of service">Terms</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-170">

      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li><a href="http://code.google.com/apis/maps/signup.html">Sign up for a Maps API key</a></li>
</ul>

<div class="line"></div>

<ul>

  <li>
    <h2><a href="reference/#">API Reference</a></h2>
    <div class="line"></div>
  </li>
  <li><h2>Developer's Guide</h2>
    <ul>
      <li><a href="index.html">Introduction</a></li>
      <li><a href="placemarks.html">Placemarks</a></li>
      <li><a href="balloons.html">Balloons</a></li>
      <li><a href="geometries.html">Geometries & Overlays</a></li>
      <li><a href="camera_control.html">Camera Control</a></li>
      <li><a href="layers.html">Layers & Controls</a></li>
      <li><a href="time.html">Time</a> <sup class="new">Updated</sup></li>
      <li><a href="ocean.html">Ocean</a></li>
      <li><a href="sky_mars_moon.html">Sky, Mars, & Moon</a></li>
      <li><a href="touring.html">Touring</a></li>
      <li><a href="events.html">Events</a></li>
      <li><a href="accessors.html">Accessors</a> <sup class="new">New!</sup></li>
      <li><a href="containers.html">Object Containers</a></li>
      <li><a href="kml.html">KML</a></li>
      <li><a href="options.html">Options</a></li>
      <li><a href="debugging.html">Debugging</a></li>
    </ul>
  </li>
        
  <div class="line"></div>
    
  <li><h2 class="tlw-expanded">Code Samples</h2>
    <ul>
      <li><a href="examples.html">Examples</a></li>
      <li><a href="demogallery.html">Demo Gallery</a>
      </li>
      <li><a href="http://code.google.com/apis/ajax/playground/?exp=earth">Code Playground</a></li>
    </ul>
  </li>
    
  <div class="line"></div>
    
  <li><h2 class="tlw-expanded">More Resources</h2>
    <ul>
      <li><a href="mediagallery.html">Media</a></li>
      <li><a href="releasenotes.html">Release Notes</a></li>
      <li><a href="http://code.google.com/p/earth-api-utility-library">Utility Library</a></li>
      <li><a href="http://code.google.com/p/earth-api-samples/issues/list?q=label%3AType-Defect">Known Issues</a></li>
    </ul>
  </li>
</ul>

<div class="line"></div>
<ul>
 <li>
    <h2>Related Docs</h2>
    <ul>                
      <li><a href="http://code.google.com/apis/kml/documentation/index.html">KML</a></li>
      <li><a href="http://code.google.com/apis/maps/documentation/index.html">Maps API</a></li>
    </ul>                
 </li>
</ul>
        <a class="hidden" href="#gc-topnav-anchor">More Google Earth API resource links</a>
      </div>

      <div class="g-unit" id="gc-pagecontent">
        <script type="text/javascript">CODESITE_docEarlyProcessing();</script>


        <h1 class="page_title">Developer Channel</h1>



<div class="toc">
  <ol>
   <li><a href="#">Overview</a></li>
   <li><a href="#time">Time</a></li>
   <li><a href="#getters">Getters</a></li>
   <li><a href="#">Balloon contents</a></li>
  </ol>
</div>

<h2 id="overview">Overview</h2>

<p>The API features described below are part of the developer channel plugin. These features are not officially supported, and may change at any time. We're providing the developer channel build to allow developers to experiment with new functionality before it's available to the general channel users.</p>
<p>This document gives an overview of the new features. It may change at any time, and may not be complete.</p>
<p>This dev channel release introduces some new time-related features, advanced selectors, and balloon methods that allow active content in your placemark balloons.</p>

<h3>Downloading the developer channel plugin</h3>
<p>The dev channel plugin can be downloaded from <a href="http://earth.google.com/plugin/download-dev-plugin.html">http://earth.google.com/plugin/download-dev-plugin.html</a>.</p>
<h3>Specifying the API version</h3>
<p>In order to gain access to the new API features, you must load the <strong>1.x</strong> version of the API:</p>
<pre>google.load(&quot;earth&quot;, &quot;1.x&quot;);</pre>

<h2 id="time">Time</h2>

<p>The Google Earth plugin is more than just the three dimensions of the globe; <em>time</em> can also be adjusted and manipulated in the plugin. More information about time is available in the <a href="time.html">Time</a> chapter.</p>
<p>Note that the plugin accepts <a href="http://www.w3.org/TR/xmlschema-2/#isoformats">XML standard (ISO 8601)</a> time format; it is not compatible with the JavaScript Date object.</p>

<h3>Creating  time stamps and spans</h3>
<p>Time stamps can be created with <code>createTimeStamp()</code>. Time spans are created with <code>createTimeSpan()</code>. Both methods take an optional id.</p>
<p>Time stamps and spans can be applied to a placemark, a LookAt or Camera object, or to the Earth instance. The latter defines the time from which the viewport sees the globe. It can be overwritten by setting a new time stamp or time span on the Earth instance, or by flying to a time-aware placemark, LookAt, or Camera.</p>
<p>Placemarks, LookAts, and  Camera views have supported time stamps and spans defined in their KML representations since version 5.0.11655.6079. <code>createTimeStamp()</code> is a new API method to add or update time values, without the need to pass in new KML.</p>
<p>To create a time stamp:</p>
<pre class="prettyprint lang-js">var timeStamp = ge.createTimeStamp('optional_id');
timeStamp.getWhen().set('1987');

placemark.setTimePrimitive(timeStamp);
lookat.setTimePrimitive(timeStamp);
ge.getTime().setTimePrimitive(timeStamp);</pre>

<p>To create a time span:</p>
<pre class="prettyprint lang-js">var timeSpan = ge.createTimeSpan('optional_id');
timeSpan.setBegin('2009-01-01T17:00:00-08:00');
timeSpan.setEnd('2011-05-05');

placemark.setTimePrimitive(timeSpan);
lookat.setTimePrimitive(timeSpan);
ge.getTime().setTimePrimitive(timeSpan);</pre>

<p>To get the current plugin time:</p>
<pre class="prettyprint lang-js">
function showCurrentPluginTime(){<br />  var time = ge.getTime().getTimePrimitive();<br />  if (time.getType() == 'KmlTimeSpan') {<br />    alert('TimeSpan from ' + tp.getBegin().get() + ' to ' + tp.getEnd().get());<br />  } else {<br />    alert('TimeStamp at ' + tp.getWhen().get());<br />  }<br />}
</pre>

<p>To get the current <em>system time</em> as a KmlTimeStamp object:</p>
<pre class="prettyprint lang-js">ge.getTime().getSystemTime()</pre>

<h3>Toggling historical imagery</h3>
<p>The dev channel plugin can display historical imagery. Once it's enabled, you'll need to also <a href="#toggling_the_time_controls">display a time slider</a>.</p>
<p>To toggle historical imagery:</p>
<pre class="prettyprint lang-js">ge.getTime().setHistoricalImageryEnabled(true);
ge.getTime().setHistoricalImageryEnabled(false);</pre>

<h3 id="toggling_the_time_controls">Toggling the time controls</h3>
<p>The time slider automatically appears when you one of the following actions is taken:</p>
<ul>
  <li>Importing time-aware KML.</li>
  <li>Calling <code>ge.getSun().setVisibility(true)</code>.</li>
  <li>Applying a time span or time stamp to a placemark, LookAt or Camera, or the Earth instance.</li>
  </ul>
<p>You can also toggle the time controls by calling <code>setVisibility()</code> on the time control object:</p>
<pre class="prettyprint lang-js">ge.getTime().getControl().setVisibility(ge.VISIBILITY_SHOW);
ge.getTime().getControl().setVisibility(ge.VISIBILITY_HIDE);</pre>

<h3>Setting the plugin's clock speed</h3>
<p>The plugin's clock speed can be adjusted with <code>setRate()</code>, which takes a float specifying the number of seconds that will elapse in the plugin for each 'real life' second.</p>
<p>To return the current rate, call <code>ge.getTime().getRate()</code>.</p>
<pre class="prettyprint lang-js">var defaultRate = 1; // 1 second in the plugin for each real second.
var speedyRate = 60*60*24*365; // 1 year for each real second.

ge.getTime().setRate(speedyRate);
ge.getTime().setRate(0); // Pause.</pre>

<h2 id="getters">Getters</h2>
<p>The developer channel plugin introduces new methods to return specific elements and properties.</p>

<h3>getUrl()</h3>
<p>An object's URL is its base address concatenated with its ID using the <code>#</code> character. This URL can be returned by calling <code>getUrl()</code> on the object.</p>
<pre>var placemarkUrl = placemark.getFullKmlUrl();</pre>

<h3>getComputedStyle()</h3>
<p>Returns the object's style properties, including inherited properties and those imported from external stylesheets.</p>

<h3>getElementByUrl()</h3>
<p>Objects that are imported as KML have an identifying URL consisting of their base address and ID, joined with the <code>#</code> character. For example, if http://code.google.com/foo.kml was fetched and contained the following:</p>
<pre class="prettyprint">
&lt;kml&gt;
&lt;Document&gt;
  &lt;Placemark id='bar'&gt;
  ...
  &lt;/Placemark&gt;
&lt;/Document&gt;
&lt;/kml&gt;</pre>
<p>The placemark could be retrieved with:</p>
<pre class="prettyprint lang-js">var pm = ge.getElementByUrl('http://www.google.com/foo.kml#bar');</pre>

<h3>getElementById()</h3>
<p>Objects created with the API, rather than by importing KML, have an unspecified base URL. Use <code>getElementById()</code> to target these objects by their ID alone.</p>
<pre>var newSO = ge.createScreenOverlay('foo');
ge.getFeatures().appendChild(newSO);
ge.getElementById('foo');</pre>

<h3>getElementsByType()</h3>
<p>You can obtain an array of all elements of a certain type, by passing that type as a string to <code>getElementsByType()</code>.</p>
<pre class="prettyprint lang-js">
objectList = document.getElementsByType('KmlPlacemark');
for (var i = 0; i &lt; objectList.getLength(); ++i) {
  ...
}</pre>

<h2 id="balloon_contents">Balloon contents</h2>

<p>The Earth plugin  strips potentially dangerous content from a placemark's description before rendering that description in a balloon. This prevents unsafe content from executing on a user's machine. However, if you have active content such as JavaScript that is known to be safe, and wish to display it in a balloon, there are a few options.</p>

<h3>getDescription()</h3>
<p>If your description content contains active content, the simplest way to include it in the balloon is to first create the placemark object, but prevent the standard description balloon from being created. Then, retrieve the content from the placemark object with <code>getDescription()</code>, and reinsert it into a new balloon with <code>setContentString()</code>.</p>

<h3>getBalloonHtml()</h3>
<p>If your placemark content contains an <code>&lt;ExtendedData&gt;</code> element, which would be stripped by <code>getDescription()</code>, use <code>getBalloonHtml()</code>.</p>
<pre class="prettyprint">
google.earth.addEventListener(ge.getGlobe(), 'click', function(event) {
  var obj = event.getTarget();
  if (obj.getType() == 'KmlPlacemark'){
    event.preventDefault();
    var placemark = obj;
    var placemark_name = placemark.getName();
    var placemark_desc = placemark.getBalloonHtml();
    
    var balloon = ge.createHtmlStringBalloon('');
    balloon.setFeature(placemark);
    balloon.setContentString('&lt;h3&gt;' + placemark_name + '&lt;/h3&gt;' + placemark_desc);
    ge.setBalloon(balloon);
  }
});
</pre>

<h3>getBalloonHtmlUnsafe()</h3>
<p>If your extended data also contains active content, use <code>getBalloonHtmlUnsafe()</code>. This method won't strip active content from <code>&lt;ExtendedData&gt;</code> elements.</p>
<h3>The balloonopening listener</h3>
<p>This new event listener is fired when any balloon is triggered to open, but has not yet opened. It allows you to override balloon contents without having to listen for a click event.</p>
<pre class="prettyprint">
google.earth.addEventListener(ge, 'balloonopening', function(event) {
  event.preventDefault();
  var placemark = event.getBalloon.getFeature();
  var description = placemark.getBalloonHtml();
  // Now create a new balloon with rendered content.
});
</pre>



      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
    &copy;2010 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://code.google.com/terms.html">Terms of Service</a> -
    <a href="http://code.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://code.google.com/more">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="http://code.google.com/intl/en">English</a> -
    <a href="http://code.google.com/intl/es">Español</a> -
    <a href="http://code.google.com/intl/ja">日本語</a> -
    <a href="http://code.google.com/intl/ko">한국어</a> -
    <a href="http://code.google.com/intl/pt-BR">Português</a> -
    <a href="http://code.google.com/intl/ru">Pусский</a> -
    <a href="http://code.google.com/intl/zh-CN">中文(简体)</a> -
    <a href="http://code.google.com/intl/zh-TW">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="../../../js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>

