<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">









 


   
  
  


<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/apis/earth/documentation/time.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Time - Google Earth API - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/apis/earth/documentation/_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="../../../css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="../../../js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../../css/iehacks.css"><![endif]-->

    <link href="../../../css/semantic_headers.css" rel="stylesheet" type="text/css" />
       <script src="addCommentsToToc.js" type="text/javascript"></script>
  </head>

  <body class="gc-documentation">

    
    
    <div id="gb">
 <span>
  
    <a id="lang-dropdown" class="dropdown" href="http://code.google.com" onclick="return false;"><img width="13" height="13" class="globeicon" src="../../../images/globe2_small.png"
     ><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  <a href="#gc-pagecontent">Skip to page content</a>
  <a href="#gc-toc">Skip to main navigation</a>
</div>

<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
  
     <img src="../../../images/code_logo.png" height="40" width="161" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "ajax apis" or "open source"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->



<h2 id="googlecode-promo">Make web development faster with these <a href="http://chrome.google.com/extensions/featured/web_dev" onclick="siteTracker._trackEvent('Promos','Web Development',this.href);">Chrome Extensions</a>!</h2>

</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google Earth API</h1>
  <ul id="docs" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="../index.html" title="Google Earth API home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="index.html" class="selected" title="Official Google Earth API documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../faq.html" title="Answers to frequently asked questions about Google Earth API">FAQ</a>
    </li>
  
    <li id="articles_link">
      <a href="../articles/index.html" title="Focused articles and tutorials for Google Earth API developers">Articles</a>
    </li>
  
    <li>
      <a href="http://googlegeodevelopers.blogspot.com/" title="Official Google Earth API blog">Blog</a>
    </li>
  
    <li>
      <a href="http://groups.google.com/group/google-earth-browser-plugin/topics" title="Google Earth API developer forum">Forum</a>
    </li>
  
    <li>
      <a href="http://code.google.com/apis/maps/terms.html" title="Google Earth API terms of service">Terms</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-170">

      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li><a href="http://code.google.com/apis/maps/signup.html">Sign up for a Maps API key</a></li>
</ul>

<div class="line"></div>

<ul>

  <li>
    <h2><a href="reference/#">API Reference</a></h2>
    <div class="line"></div>
  </li>
  <li><h2>Developer's Guide</h2>
    <ul>
      <li><a href="index.html">Introduction</a></li>
      <li><a href="placemarks.html">Placemarks</a></li>
      <li><a href="balloons.html">Balloons</a></li>
      <li><a href="geometries.html">Geometries & Overlays</a></li>
      <li><a href="camera_control.html">Camera Control</a></li>
      <li><a href="layers.html">Layers & Controls</a></li>
      <li><a href="time.html">Time</a> <sup class="new">Updated</sup></li>
      <li><a href="ocean.html">Ocean</a></li>
      <li><a href="sky_mars_moon.html">Sky, Mars, & Moon</a></li>
      <li><a href="touring.html">Touring</a></li>
      <li><a href="events.html">Events</a></li>
      <li><a href="accessors.html">Accessors</a> <sup class="new">New!</sup></li>
      <li><a href="containers.html">Object Containers</a></li>
      <li><a href="kml.html">KML</a></li>
      <li><a href="options.html">Options</a></li>
      <li><a href="debugging.html">Debugging</a></li>
    </ul>
  </li>
        
  <div class="line"></div>
    
  <li><h2 class="tlw-expanded">Code Samples</h2>
    <ul>
      <li><a href="examples.html">Examples</a></li>
      <li><a href="demogallery.html">Demo Gallery</a>
      </li>
      <li><a href="http://code.google.com/apis/ajax/playground/?exp=earth">Code Playground</a></li>
    </ul>
  </li>
    
  <div class="line"></div>
    
  <li><h2 class="tlw-expanded">More Resources</h2>
    <ul>
      <li><a href="mediagallery.html">Media</a></li>
      <li><a href="releasenotes.html">Release Notes</a></li>
      <li><a href="http://code.google.com/p/earth-api-utility-library">Utility Library</a></li>
      <li><a href="http://code.google.com/p/earth-api-samples/issues/list?q=label%3AType-Defect">Known Issues</a></li>
    </ul>
  </li>
</ul>

<div class="line"></div>
<ul>
 <li>
    <h2>Related Docs</h2>
    <ul>                
      <li><a href="http://code.google.com/apis/kml/documentation/index.html">KML</a></li>
      <li><a href="http://code.google.com/apis/maps/documentation/index.html">Maps API</a></li>
    </ul>                
 </li>
</ul>
        <a class="hidden" href="#gc-topnav-anchor">More Google Earth API resource links</a>
      </div>

      <div class="g-unit" id="gc-pagecontent">
        <script type="text/javascript">CODESITE_docEarlyProcessing();</script>


        <h1 class="page_title">Time</h1>



<div class="toc">
  <ol>
    <li><a href="#intro">Introduction</a></li>
    <li><a href="#the_time_slider">The time slider</a></li>
    <li><a href="#historical_imagery">Historical imagery</a></li>
    <li><a href="#clock_rate">Clock rate</a></li>
    <li><a href="#creating_time_stamps_and_spans">Creating time stamps and spans</a></li>
  </ol>
</div>

<h2 id="intro">Introduction</h2>

<p>Plugin time can be set and manipulated in a number of ways:</p>

<ul>
  <li><strong>Using the computer's clock time</strong>. When Sun is turned on, and no other time information is present in the plugin, the computer's clock time is used to define the current position of the Sun in relation to the Earth.</li>
  <li><strong>By parsing or importing KML</strong>. KML files introduced into the plugin can contain time information attached to features or views.</li>
  <li><strong>With API methods</strong>. The <code>createTimeStamp()</code> and <code>createTimeSpan()</code> methods create time primitives, which can be applied to placemarks, LookAt or Camera objects, or to the Earth instance.</li>
</ul>

<p>Time affects the plugin in two ways. When attached to KML <a href="http://code.google.com/apis/kml/documentation/kmlreference.html#feature">Features</a>, such as placemarks, it defines the times at which those features are visible; when attached to a Camera or a LookAt, or to the Earth instance, it sets the plugin's virtual clock.</p>

<h2 id="the_time_slider">The time slider</h2>

<p>Once time is introduced to the plugin, a time slider appears, allowing the end user to manipulate the plugin time. The slider can also be toggled from the API by calling <code>setVisibility()</code> on the time control object:

<pre class="prettyprint lang-js">ge.getTime().getControl().setVisibility(ge.VISIBILITY_SHOW);
ge.getTime().getControl().setVisibility(ge.VISIBILITY_HIDE);</pre>

<p><img src="images/time_slider.gif" /></p>
<p>The time slider will range from the earliest to the latest time values loaded into the plugin. If historical imagery is enabled, the time slider will also include all dates for which imagery is available in the current view. To retrieve the current extents of the time slider, call <code>getExtents()</code> on the time control object. Calling <code>getExtents()</code> before the time slider has fully loaded will return incorrect values.</p>
<pre class="prettyprint lang-js">
function showExtents() {
   var extents = ge.getTime().getControl().getExtents();
   var begin = extents.getBegin().get();
   var end = extents.getEnd().get();
   alert(&quot;Begin: &quot; + begin + &quot;\n&quot;
       + &quot;End:   &quot; + end);
}</pre>


<h2 id="historical_imagery">Historical imagery</h2>

<p>The plugin's imagery database includes a great deal of imagery beyond the latest that is displayed by default. This older imagery is available through the historical imagery feature. To enable/disable it in the plugin:</p>

<pre class="prettyprint lang-js">ge.getTime().setHistoricalImageryEnabled(true);
ge.getTime().setHistoricalImageryEnabled(false);</pre>

<p>Once historical imagery is enabled, a time slider is displayed, allowing the end user to move through time and view the range of imagery available.</p>

<p><img src="images/historical_imagery_sinking_ship.jpg" /></p>

<p><a href="samples/historical_imagery_sinking_ship.html">View it in the plugin.</a></p>

<h2 id="clock_rate">Clock rate</h2>
<p>The plugin's clock rate can be adjusted with <code>setRate()</code>, which takes a float specifying the number of seconds that will elapse in the plugin for each 'real life' second.</p>
<p>To return the current rate, call <code>ge.getTime().getRate()</code>.</p>
<pre class="prettyprint lang-js">var defaultRate = 1; // 1 second in the plugin for each real second.
var speedyRate = 60*60*24*365; // 1 year for each real second.

ge.getTime().setRate(speedyRate);
ge.getTime().setRate(0); // Pause.</pre>

<h3>Calculated rate</h3>
<p>Calling <code>getCalculatedRate()</code> on the time control object returns the rate that the plugin will use if the user clicks the play button on the time slider. This rate will vary based on the range of time currently displayed, as well as user interaction with the slider (such as pressing the  <strong>+</strong> and <strong>-</strong> rate buttons in the time control).</p>

<pre class="prettyprint">
function showCalcRate() {
   var calcRate = ge.getTime().getControl().getCalculatedRate();
   var message = 'Calculated rate: ' + calcRate + '\n' + '1 real second equals ';
   calcRate = calcRate/(60*60*24*365);
   if (calcRate &gt; 1) {
      alert(message + calcRate + ' years');
   } else if (calcRate*365 &gt; 1) {
      alert(message + calcRate*365 + ' days');
   } else if (calcRate*365*24 &gt; 1) {
      alert(message + calcRate*365*24 + ' hours');
   } else if (calcRate*365*24*60 &gt; 1) {
      alert(message + calcRate*365*24*60 + ' minutes');
   } else {
      alert(message + calcRate*365*24*60*60 + ' seconds');
   }
}</pre>

<h2 id="creating_time_stamps_and_spans">Creating time stamps and spans</h2>

<p>Time stamps can be created with <code>createTimeStamp()</code>. Time spans are created with <code>createTimeSpan()</code>. Both methods take an optional id.</p>

<p>Time stamps and spans can be applied to a KML <a href="http://code.google.com/apis/kml/documentation/kmlreference.html#feature">Feature</a> (such as a placemark), a LookAt or Camera object, or to the Earth instance.</p>
<p>To create a time stamp:</p>
<pre class="prettyprint lang-js">var timeStamp = ge.createTimeStamp('optional_id');
timeStamp.getWhen().set('1987');

placemark.setTimePrimitive(timeStamp);
lookat.setTimePrimitive(timeStamp);
ge.getTime().setTimePrimitive(timeStamp);</pre>

<p>To create a time span:</p>
<pre class="prettyprint lang-js">var timeSpan = ge.createTimeSpan('optional_id');
timeSpan.setBegin('2009-01-01T17:00:00-08:00');
timeSpan.setEnd('2011-05-05');

placemark.setTimePrimitive(timeSpan);
lookat.setTimePrimitive(timeSpan);
ge.getTime().setTimePrimitive(timeSpan);</pre>

<p>To get the current plugin time:</p>

<pre class="prettyprint lang-js">function showCurrentPluginTime(){
   var time = ge.getTime().getTimePrimitive();
   if (time.getType() == 'KmlTimeSpan') {
      alert('TimeSpan from ' + time.getBegin().get()
          + ' to ' + time.getEnd().get());
   } else {
      alert('TimeStamp at ' + time.getWhen().get());
   }
}</pre>

<p>The plugin can return your computer's system time as a time stamp object:</p>
<pre class="prettyprint lang-js">ge.getTime().getSystemTime();</pre>
<p>This provides a way of setting the plugin's virtual clock to the current real time. (Set the virtual clock rate to <code>1</code> to continue mirroring real time.) You can also apply the returned time stamp object to a newly created placemark, for example, to mark the exact time at which it was created.</p>





</div>
<!-- end gc-pagecontent -->

   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
    &copy;2010 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://code.google.com/terms.html">Terms of Service</a> -
    <a href="http://code.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://code.google.com/more">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="http://code.google.com/intl/en">English</a> -
    <a href="http://code.google.com/intl/es">Español</a> -
    <a href="http://code.google.com/intl/ja">日本語</a> -
    <a href="http://code.google.com/intl/ko">한국어</a> -
    <a href="http://code.google.com/intl/pt-BR">Português</a> -
    <a href="http://code.google.com/intl/ru">Pусский</a> -
    <a href="http://code.google.com/intl/zh-CN">中文(简体)</a> -
    <a href="http://code.google.com/intl/zh-TW">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="../../../js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>

