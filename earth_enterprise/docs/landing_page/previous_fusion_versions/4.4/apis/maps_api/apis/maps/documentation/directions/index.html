<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">








 
 



 
  

  









































<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/apis/maps/documentation/directions/index.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>The Google Directions API - Google Maps API Web Services - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/apis/maps/documentation/webservices/_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="../../../../css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="../../../../js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../../../css/iehacks.css"><![endif]-->

  </head>

  <body class="gc-documentation">

    <div id="gb">
 <span>
  
    <a id="lang-dropdown" href="http://code.google.com" onclick="return false;"><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  
  
</div>

<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
  
     <img src="../images/code_logo.gif" height="40" width="167" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "adwords" or "open source"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->




</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google Maps API Web Services</h1>
  <ul id="docs" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="index.html" title="Google Maps API Web Services home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="index.html" class="selected" title="Official Google Maps API Web Services documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../../faq.html" title="Answers to frequently asked questions about Google Maps API Web Services">FAQ</a>
    </li>
  
    <li>
      <a href="http://googlegeodevelopers.blogspot.com/" title="Official Google Maps API Web Services blog">Blog</a>
    </li>
  
    <li>
      <a href="../webservices/forum.html" title="Google Maps API Web Services developer forum">Forum</a>
    </li>
  
    <li>
      <a href="../../terms.html" title="Google Maps API Web Services terms of service">Terms</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-170">

      <a name="gc-toc-anchor"></a>  
      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li><a href="../../index.html">Maps API Family</a></li>
  <li><a href="http://code.google.com/apis/kml/documentation/kmlSearch.html">Index Your Maps Content</a></li>
</ul>
    <div class="line"></div>
      <ul>
        <li><h2><a href="../webservices/index.html">Maps API Web Services</a></h2>
         <ul>
           <li><a href="../geocoding/index.html">Geocoding API</a></li>
           <li><a href="index.html">Directions API</a></li>
           <li><a href="../elevation/index.html">Elevation API</a></li>
           <li><a href="../places/index.html">Places API</a></li>
         </ul>
       </li>
      </ul>
<div class="line"></div>
<ul>
  <li><h2>Maps JavaScript API V3</h2>
    <ul>
      <li><a href="../javascript/index.html">Home Page</a></li>
      <li><a href="../javascript/basics.html">Documentation</a></li>
    </ul>
  </li>
</ul>
      <ul>
        <li><h2>Maps Javascript API V2</h2>
         <p><span style="color:grey">(Deprecated API)</span></p>
         <ul>
           <li><a href="../javascript/v2/index.html">Home Page</a></li>
           <li><a href="../javascript/v2/basics.html">Documentation</a></li>
         </ul>
       </li>
      </ul>
<div class="line"></div>
<ul>
  <li><h2>Maps API for Flash</h2>
    <ul>
      <li><a href="../flash/index.html">Home Page</a></li>
      <li><a href="../flash/intro.html">Documentation</a></li>
    </ul>
  </li>
</ul>
   <div class="line"></div>
    <ul>
      <li><h2>Maps Data API</h2>
        <p><span style="color:grey">(Deprecated API)</span></p>
        <ul>
          <li><a href="../mapsdata/index.html">Home Page</a></li>
          <li><a href="../mapsdata/developers_guide_protocol.html">Documentation</a></li>
        </ul>
      </li>
    </ul>
       <div class="line"></div>
        <ul>
          <li><h2>Static Maps API</h2>
            <ul>
              <li><a href="../staticmaps/index.html">Developer Guide</a></li>
            </ul>
          </li>
        </ul>
<div class="line"></div>
        <ul>
          <li><h2>Earth API</h2>
            <ul>
              <li><a href="http://code.google.com/apis/earth">Home Page</a></li>
              <li><a href="http://code.google.com/apis/earth/documentation">Documentation</a></li>
            </ul>
          </li>
        </ul>
      <div class="line"></div>
        <ul>
          <li><h2>Local Search API</h2>
            <p><span style="color:grey">(Deprecated API)</span></p>
            <ul>
              <li>
                <a href="../localsearch/index.html">Home Page</a>
              </li>
              <li>
                <a href="../localsearch/start.html">Documentation</a>
              </li>
            </ul>
          </li>
        </ul>
   <div class="line"></div>
<div class="promo">
<p><a href="../premier/index.html">Google Maps API Premier</a></p>
<p>Includes enterprise licensing and support</p>
</div>

      </div>
      
      <a name="gc-pagecontent-anchor"></a>   
      <div class="g-unit" id="gc-pagecontent">
        <h1 class="page_title">The Google Directions API</h1>


<div class="toc">
  <ol>
  <li><a href="#Introduction">Introduction</a></li>
  <li><a href="#Audience">Audience</a></li>
  <li><a href="#Limits">Limits</a></li>
  <li><a href="#DirectionsRequests">Directions Requests</a>
    <ol>
      <li><a href="#RequestParameters">Request Parameters</a></li>
      <li><a href="#TravelModes">Travel Modes</a></li>
      <li><a href="#Waypoints">Using Waypoints in Routes</a></li>
      <li><a href="#Restrictions">Restrictions</a></li>
      <li><a href="#UnitSystems">Unit Systems</a></li>
      <li><a href="#RegionBiasing">Region Biasing</a></li>
    </ol>    
  </li>
  <li><a href="#DirectionsResponses">Directions Responses</a>
    <ol>
      <li><a href="#JSON">JSON Output</a></li>
      <li><a href="#XML">XML Output</a></li>
      <li><a href="#DirectionsResponseElements">Directions Response Elements</a>
        <ul>
           <li><a href="#StatusCodes">Status Codes</a></li>
           <li><a href="#Routes">Routes</a></li>
           <li><a href="#Legs">Legs</a></li>
           <li><a href="#Steps">Steps</a></li>   
        </ul>
      </li>
    </ol>    
  </li>
  </ol>
</div>

<div class="special">
<p><span style="color:red">Note:</span> The Google Directions
API does not requires a Maps API key!<br />Google Maps
API Premier customers must, however, <i>sign</i> their URLs
using a new cryptographic key. See the
<a href="../premier/guide.html#URLSigning">
Premier documentation</a> for more information.</p>
</div>

<h1 id="Introduction">Introduction</h1>

<p>The Google Directions API is a service that calculates
directions between locations using an HTTP request. Directions may
specify origins, destinations and waypoints either as text strings
(e.g. "Chicago, IL" or "Darwin, NT, Australia") or as
latitude/longitude coordinates. The Directions API can return
multi-part directions using a series of waypoints.</p>

<p>This service is generally designed for calculating directions
for static (known in advance) addresses for placement of application
content on a map; this service is <b>not</b> designed to respond in
real time to user input, for example. For dynamic directions
calculations (for example, within a user interface element), consult
the documentation for the
<a href="../javascript/services.html#Directions">
JavaScript API V3 Directions Service</a>.</p>

<p>Calculating directions is a time and resource intensive task.
Whenever possible, calculate known addresses ahead of time (using the
service described here) and store your results in a temporary
cache of your own design.</p>

<h1 name="Audience" id="Audience">Audience</h1>

<p>This document is intended for website and mobile developers who want to
use compute direction data within maps provided by one of the Google
Maps APIs. It provides an introduction to using the API and reference
material on the available parameters.</p>

<h1 name="Limits" id="Limits">Usage Limits</h1>

<p>Use of the Google Directions API is subject to a query limit of
2,500 directions requests per day. Individual
directions requests may contain up to 8 intermediate
waypoints in the request. <a href="../premier/index.html">
Google Maps Premier</a> customers may query up to 100,000
directions requests per day, with up to 23 waypoints
allowed in each request.</p>

<p>Additionally, note that Directions API URLs are restricted to 2048 characters,
before <a href="../webservices/index.html#BuildingURLs">
URL Encoding</a>. As some Directions service URLs may involve many locations
along a path, be aware of this limit when constructing your URLs.</p>

<p><span style="color:red">Note: </span> the Directions API may only be
used in conjunction with displaying results on a Google map; using
Directions data without displaying a map for which directions data was
requested is prohibited. Additionally, calculation of directions generates
copyrights and warnings which must be displayed to the user in some fashion.
For complete details on allowed usage, consult the 
<a href="../../terms.html#section_10_12">Maps API Terms of Service
License Restrictions</a>.</p>

<h1 id="DirectionsRequests">Directions Requests</h1>

<p>A Directions API request is an HTTP URL of the following
form:</p>

<pre class="prettyprint">
http://maps.googleapis.com/maps/api/directions/<i>output</i>?<i>parameters</i>
</pre>

<p>where <code>output</code> may be either of the following values:</p>

<ul>
  <li><code>json</code> (recommended) indicates output in JavaScript
  Object Notation (JSON)</li>
  <li><code>xml</code> indicates output as XML</li>
</ul>

<h2 id="RequestParameters">Request Parameters</h2>

<p>Certain parameters are required while others are optional. As is
standard in URLs, all parameters are separated using the ampersand
(<code>&</code>) character. The list of parameters and their possible
values are enumerated below.</p>

<p>The Directions API defines a directions request using the following
URL parameters:</p>

<ul>
  <li><code>origin</code> (<i>required</i>) &mdash; The address or textual
  latitude/longitude value from which you wish to calculate directions.
  <span style="color:red">*</span></li>
  <li><code>destination</code> (<i>required</i>) &mdash; The address or
  textual latitude/longitude value from which you wish to calculate
  directions.<span style="color:red">*</span></li>
  <li><code>mode</code> (<i>optional</i>, defaults to <code>driving</code>)
  &mdash; specifies what
  mode of transport to use when calculating directions. Valid
  values are specified in <a href="#TravelModes">Travel Modes</a>.</li>
  <li><p><code>waypoints</code> (<i>optional</i>) specifies
  an array of waypoints. Waypoints alter a route by routing it
  through the specified location(s). A waypoint is specified
  as either a latitude/longitude coordinate or as an address
  which will be geocoded. (For more information on waypoints,
  see <a href="#Waypoints">Using Waypoints in Routes</a> below.)</p>
  </li>
  <li><code>alternatives</code> (<i>optional</i>), if set to
  <code>true</code>, specifies that the Directions service may
  provide more than one route alternative in the response. Note that
  providing route alternatives may increase the response time from
  the server.</li>
  <li><p><code>avoid</code> (<i>optional</i>) indicates that the
  calculated route(s) should avoid the indicated features. Currently,
  this parameter supports the following two arguments:</p>
  <ul>
    <li><code>tolls</code> indicates that the calculated route should
    avoid toll roads/bridges.</li>
    <li><code>highways</code> indicates that the calculated route
    should avoid highways.</li>
  </ul>
  <p>(For more information see <a href="#Restrictions">Route Restrictions</a>
  below.)</li>
  <li><p><code>units</code> (<i>optional</i>) &mdash;  specifies what
  unit system to use when displaying results. Valid values are
  specified in <a href="#UnitSystems">Unit Systems</a> below.</p>
  <li><code>region</code> (<i>optional</i>) &mdash; The region code,
  specified as a ccTLD ("top-level domain") two-character value. (For more
  information see <a href="#RegionCodes">Region Biasing</a> below.)</li>
  <li><code>language</code> (<i>optional</i>) &mdash; The language in
  which to return results. See the
  <a href="../../faq.html#languagesupport">supported list of domain
  languages</a>. Note that we often update supported languages so this
  list may not be exhaustive. If <code>language</code> is not supplied,
  the Directions service will attempt to use the native language of
  the browser wherever possible. See <a href="#RegionBiasing">Region
  Biasing</a> for more information.</li>
  <li><code>sensor</code> (<i>required</i>) &mdash; Indicates whether
  or not the directions request comes from a device with a location
  sensor. This value must be either <code>true</code> or
  <code>false</code>.</li>
</ul>

<p><span style="color:red">* Note: </span> You may pass either an
address or a latitude/longitude coordinate in several parameters. If you
pass an address as a string, the Directions service will geocode
the string and convert it to a latitude-longitude coordinate to
calculate directions. If you pass coordinates, ensure that no space
exists between the latitude and longitude values.</p>

<h2 id="TravelModes">Travel Modes</h2>

<p>When you calculate directions, you may specify
which transportation <code>mode</code> to use. By default,
directions are calculated as <code>driving</code> directions. The following
travel modes are currently supported:</p>

<ul>
<li><code>driving</code> (default) indicates standard driving directions
using the road network.</li>
<li><code>walking</code> requests walking directions via
pedestrian paths &amp; sidewalks (where available).</li>
<li><code>bicycling</code> requests bicycling directions via
bicycle paths &amp; preferred streets (currently only available
in the US).</li>
</ul>

<p><span style="color:red; ">Note:</span> Both walking and
bicycling directions may sometimes not include clear pedestrian or
bicycling paths, so these directions will return <code>warnings</code>
in the returned result which you must display to the user.</p>

<h2 id="Waypoints">Using Waypoints in Routes</h2>

<p>When calculating routes using the Directions API, you may
also specify <i>waypoints</i>. Waypoints allow you to
calculate routes through additional locations, in which
case the returned route passes through the given waypoints.</p>

<p>Waypoints are specified within the <code>waypoints</code>
parameter and consist of one or more addresses or locations
separated by the pipe (<code>|</code>) character.</p>

<p>For example, the following URL initiates a Directions request
for a route between Boston, MA and Concord, MA via Charlestown
and Lexington, in that order:</p>

<pre>
http://maps.googleapis.com/maps/api/directions/json?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown,MA|Lexington,MA&sensor=false
</pre>

<p>By default, the Directions service calculates a route through
the provided waypoints in their given order. Optionally, you
may pass <code>optimize:true</code> as the first argument
within the <code> waypoints</code> parameter to allow the Directions
service to optimize the provided route by rearranging the waypoints in
a more efficient order. (This optimization is an application of the
<a href="http://en.wikipedia.org/wiki/Travelling_salesman_problem">
Travelling Salesman Problem</a>.)</p>

<p>If you instruct the Directions service to optimize the order of
its waypoints, their order will be returned in the
<code>waypoint_order</code> field within the
<code>routes</code> object. The <code>waypoint_order</code> field
returns values which are zero-based.</p>

<p>The following example calculates a road trip route from Adelaide, South
Australia to each of South Australia's main wine regions using route
optimization. </p>


<pre class="prettyprint">
http://maps.googleapis.com/maps/api/directions/json?origin=Adelaide,SA&destination=Adelaide,SA&waypoints=optimize:true|Barossa+Valley,SA|Clare,SA|Connawarra,SA|McLaren+Vale,SA&sensor=false
</pre>


<p>Inspection of the calculated route will indicate that the route is calculated using
the following waypoint order:</p>

<pre class="prettyprint">
"waypoint_order": [ 1, 0, 2, 3 ]
</pre>

<h2 id="Restrictions">Restrictions</h2>

<p>Directions may be calculated that adhere to certain restrictions. Restrictions
are indicated by use of the <code>avoid</code> parameter, and an argument to that
parameter indicating the restriction to avoid. Currently two restrictions are
supported:</p>

<ul>
  <li><code>avoid=tolls</code></li>
  <li><code>avoid=highways</code></li>
</ul>

<p><span style="color:red">Note:</span> the addition of restrictions does not
preclude routes that include the restricted feature; it simply biases the result
to more favorable routes.</p>

<h2 id="UnitSystems">Unit Systems</h2>

<p>Directions results contain <code>text</code> within <code>distance</code>
fields that may be displayed to the user to indicate the distance of a
particular "step" of the route. By default, this text uses the unit system
of the origin's country or region. (<span style="color:red">Note: </span>
origins expressed using coordinates rather than addresses always default
to metric units.)</p>

<p>For example, a route from
"Chicago, IL" to "Toronto, ONT" will display results in miles, while
the reverse route will display results in kilometers. You
may override this unit system by setting one explicitly within the
request's <code>units</code> parameter, passing one of the following
values:</p>

<ul>
  <li><code>metric</code> specifies usage of the metric system.
  Textual distances are returned using kilometers and meters.</li>
  <li><code>imperial</code> specifies usage of the Imperial
  (English) system. Textual distances are returned using miles and feet.</li>
</ul>

<p><span style="color:red">Note: </span> this unit system setting only
affects the <code>text</code> displayed within <code>distance</code>
fields. The <code>distance</code> fields also contain <code>values</code>
which are always expressed in meters.</p>

<h2 id="RegionBiasing">Region Biasing</h2>

<p>You can also set the Directions service to return results biased to a
particular region by use of the <code>region</code> parameter. This parameter
takes a <a href="http://en.wikipedia.org/wiki/CcTLD">ccTLD</a> (country code
top-level domain) argument specifying the region bias. Most ccTLD codes are
identical to ISO 3166-1 codes, with some notable exceptions. For example,
the United Kingdom's ccTLD is "uk" (<code>.co.uk</code>) while its ISO 3166-1
code is "gb" (technically for the entity of "The United Kingdom of Great
Britain and Northern Ireland").</p> 

<p>You may utilize any domain in which the main Google Maps application has
launched driving directions.</p>

<p>For example, a directions request from "Toldeo" to "Madrid"
returns a result when <code>region</code> is set to <code>es</code>
as "Toledo" is interpreted as the Spanish city:</p>


<pre>
<b>http://maps.googleapis.com/maps/api/directions/json?origin=Toledo&destination=Madrid&region=es&sensor=false</b>

{
  "status": "OK",
  "routes": [ {
    "summary": "AP-41",
    "legs": [ {
        ...
    } ],
    "copyrights": "Map data ©2010 Europa Technologies, Tele Atlas",
    "warnings": [ ],
    "waypoint_order": [ ]
  } ]
}
</pre>


<p>A directions for "Toledo" to "Madrid" sent to with no <code>region</code>
parameter will not return any results, since "Toledo" is interpreted as the
city in Ohio:</p>


<pre>
<b>http://maps.googleapis.com/maps/api/directions/json?origin=Toledo&destination=Madrid&sensor=false</b>

{
  "status": "ZERO_RESULTS",
  "routes": [ ]
}
</pre>


<h1 id="DirectionsResponses">Directions Responses</h1>

<p>Directions responses are returned in the format indicated by the
<code>output</code> flag within the URL request's path.</p>

<h2 id="JSON">JSON Output</h2>

<p>A sample HTTP request is shown below, calculating the route
from Chicago, IL to Los Angeles, CA via two waypoints in Joplin, MO
and Oklahoma City, OK:</p>

<pre class="prettyprint">
http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false
</pre>

<p>The JSON result is shown below. Because directions results can be quite verbose,
repeated elements within the response have been omitted for clarity.</p>


<pre class="prettyprint">
{
  "status": "OK",
  "routes": [ {
    "summary": "I-40 W",
    "legs": [ {
      "steps": [ {
        "travel_mode": "DRIVING",
        "start_location": {
          "lat": 41.8507300,
          "lng": -87.6512600
        },
        "end_location": {
          "lat": 41.8525800,
          "lng": -87.6514100
        },
        "polyline": {
          "points": "a~l~Fjk~uOwHJy@P",
          "levels": "B?B"
        },
        "duration": {
          "value": 19,
          "text": "1 min"
        },
        "html_instructions": "Head \u003cb\u003enorth\u003c/b\u003e on \u003cb\u003eS Morgan St\u003c/b\u003e toward \u003cb\u003eW Cermak Rd\u003c/b\u003e",
        "distance": {
          "value": 207,
          "text": "0.1 mi"
        }
      },
      ...
      ... additional steps of this leg
    ...
    ... additional legs of this route
      "duration": {
        "value": 74384,
        "text": "20 hours 40 mins"
      },
      "distance": {
        "value": 2137146,
        "text": "1,328 mi"
      },
      "start_location": {
        "lat": 35.4675602,
        "lng": -97.5164276
      },
      "end_location": {
        "lat": 34.0522342,
        "lng": -118.2436849
      },
      "start_address": "Oklahoma City, OK, USA",
      "end_address": "Los Angeles, CA, USA"
    } ],
    "copyrights": "Map data ©2010 Google, Sanborn",
    "overview_polyline": {
      "points": "a~l~Fjk~uOnzh@vlbBtc~@tsE`vnApw{A`dw@~w\\|tNtqf@l{Yd_Fblh@rxo@b}@xxSfytAblk@xxaBeJxlcBb~t@zbh@jc|Bx}C`rv@rw|@rlhA~dVzeo@vrSnc}Axf]fjz@xfFbw~@dz{A~d{A|zOxbrBbdUvpo@`cFp~xBc`Hk@nurDznmFfwMbwz@bbl@lq~@loPpxq@bw_@v|{CbtY~jGqeMb{iF|n\\~mbDzeVh_Wr|Efc\\x`Ij{kE}mAb~uF{cNd}xBjp]fulBiwJpgg@|kHntyArpb@bijCk_Kv~eGyqTj_|@`uV`k|DcsNdwxAott@r}q@_gc@nu`CnvHx`k@dse@j|p@zpiAp|gEicy@`omFvaErfo@igQxnlApqGze~AsyRzrjAb__@ftyB}pIlo_BflmA~yQftNboWzoAlzp@mz`@|}_@fda@jakEitAn{fB_a]lexClshBtmqAdmY_hLxiZd~XtaBndgC",
      "levels": "BBBAAAAABAABAAAAAABBAAABBAAAABBAAABABAAABABBAABAABAAAABABABABBABAABB"
    },
    "warnings": [ ],
    "waypoint_order": [ 0, 1 ]
  } ]
}    
</pre>


<p>Generally, only one entry in the <code>"routes"</code> array is returned
for directions lookups, though the Directions service may return several routes
if you pass <code>alternatives=true</code>.</p>

<p>Note that these results generally need to be <i>parsed</i> if you wish
to extract values from the results. Parsing JSON is relatively easy. See
<a href="../webservices/index.html#ParsingJSON">Parsing
JSON</a> for some recommended design patterns.</p>

<h2 id="XML">XML Output</h2>

<p>In this example, the Directions API requests an <code>xml</code> response for the
identical query shown above for :</p>

<pre class="prettyprint">
http://maps.googleapis.com/maps/api/directions/xml?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false
</pre>

<p>The XML returned by this request is shown below.</p>

<pre class="prettyprint">
&lt;DirectionsResponse&gt; 
 &lt;status&gt;OK&lt;/status&gt; 
 &lt;route&gt; 
  &lt;summary&gt;I-40 W&lt;/summary&gt; 
  &lt;leg&gt; 
   &lt;step&gt; 
    &lt;travel_mode&gt;DRIVING&lt;/travel_mode&gt; 
    &lt;start_location&gt; 
     &lt;lat&gt;41.8507300&lt;/lat&gt; 
     &lt;lng&gt;-87.6512600&lt;/lng&gt; 
    &lt;/start_location&gt; 
    &lt;end_location&gt; 
     &lt;lat&gt;41.8525800&lt;/lat&gt; 
     &lt;lng&gt;-87.6514100&lt;/lng&gt; 
    &lt;/end_location&gt; 
    &lt;polyline&gt; 
     &lt;points&gt;a~l~Fjk~uOwHJy@P&lt;/points&gt; 
     &lt;levels&gt;B?B&lt;/levels&gt; 
    &lt;/polyline&gt; 
    &lt;duration&gt; 
     &lt;value&gt;19&lt;/value&gt; 
     &lt;text&gt;1 min&lt;/text&gt; 
    &lt;/duration&gt; 
    &lt;html_instructions&gt;Head &lt;b&gt;north&lt;/b&gt; on &lt;b&gt;S Morgan St&lt;/b&gt; toward &lt;b&gt;W Cermak Rd&lt;/b&gt;&lt;/html_instructions&gt; 
    &lt;distance&gt; 
     &lt;value&gt;207&lt;/value&gt; 
     &lt;text&gt;0.1 mi&lt;/text&gt; 
    &lt;/distance&gt; 
   &lt;/step&gt; 
   ...
   ... additional steps of this leg
  ...
  ... additional legs of this route
   &lt;duration&gt; 
    &lt;value&gt;74384&lt;/value&gt; 
    &lt;text&gt;20 hours 40 mins&lt;/text&gt; 
   &lt;/duration&gt; 
   &lt;distance&gt; 
    &lt;value&gt;2137146&lt;/value&gt; 
    &lt;text&gt;1,328 mi&lt;/text&gt; 
   &lt;/distance&gt; 
   &lt;start_location&gt; 
    &lt;lat&gt;35.4675602&lt;/lat&gt; 
    &lt;lng&gt;-97.5164276&lt;/lng&gt; 
   &lt;/start_location&gt; 
   &lt;end_location&gt; 
    &lt;lat&gt;34.0522342&lt;/lat&gt; 
    &lt;lng&gt;-118.2436849&lt;/lng&gt; 
   &lt;/end_location&gt; 
   &lt;start_address&gt;Oklahoma City, OK, USA&lt;/start_address&gt; 
   &lt;end_address&gt;Los Angeles, CA, USA&lt;/end_address&gt; 
  &lt;copyrights&gt;Map data ©2010 Google, Sanborn&lt;/copyrights&gt; 
  &lt;overview_polyline&gt; 
   &lt;points&gt;a~l~Fjk~uOnzh@vlbBtc~@tsE`vnApw{A`dw@~w\|tNtqf@l{Yd_Fblh@rxo@b}@xxSfytAblk@xxaBeJxlcBb~t@zbh@jc|Bx}C`rv@rw|@rlhA~dVzeo@vrSnc}Axf]fjz@xfFbw~@dz{A~d{A|zOxbrBbdUvpo@`cFp~xBc`Hk@nurDznmFfwMbwz@bbl@lq~@loPpxq@bw_@v|{CbtY~jGqeMb{iF|n\~mbDzeVh_Wr|Efc\x`Ij{kE}mAb~uF{cNd}xBjp]fulBiwJpgg@|kHntyArpb@bijCk_Kv~eGyqTj_|@`uV`k|DcsNdwxAott@r}q@_gc@nu`CnvHx`k@dse@j|p@zpiAp|gEicy@`omFvaErfo@igQxnlApqGze~AsyRzrjAb__@ftyB}pIlo_BflmA~yQftNboWzoAlzp@mz`@|}_@fda@jakEitAn{fB_a]lexClshBtmqAdmY_hLxiZd~XtaBndgC&lt;/points&gt; 
   &lt;levels&gt;BBBAAAAABAABAAAAAABBAAABBAAAABBAAABABAAABABBAABAABAAAABABABABBABAABB&lt;/levels&gt; 
  &lt;/overview_polyline&gt; 
  &lt;optimized_waypoint_index&gt;0&lt;/optimized_waypoint_index&gt; 
  &lt;optimized_waypoint_index&gt;1&lt;/optimized_waypoint_index&gt; 
 &lt;/route&gt; 
&lt;/DirectionsResponse&gt;    
</pre>

<p>Note that the XML response consists of a single <code>&lt;DirectionsResponse&gt;</code>
and two top-level elements:</p>
<ul>
<li><code>&lt;status&gt;</code> contains metadata on the request. See
<a href="#StatusCodes">Status Codes</a> below.</li>
<li>Zero of more <code>&lt;route&gt;</code> elements, each containing a single set of
routing information between the origin and destination.</li>
</ul>

<p>We recommend that you use <code>json</code> as the preferred output flag
unless your service requires <code>xml</code> for some reason. Processing XML trees
requires some care, so that you reference proper nodes and elements. See
<a href="../webservices/index.html#ParsinXML">Parsing XML
with XPath</a> for some recommended design patterns for output processing.</p>

<p class="note">The remainder of this documentation will use JSON syntax. In most
cases, the output format does not matter for purposes of illustrating concepts or field
names in the documentation. However, note the following subtle differences:</p>

<ul>
  <li>XML results are wrapped in a root <code>&lt;DirectionsResponse&gt;</code> element.</li>
  <li>JSON denotes entries with multiple elements by plural arrays (<code>steps</code>),
  while XML denotes these using multiple singular elements (<code>&lt;step&gt;</code>).</li>
  <li>Blank elements are indicated through empty arrays in JSON, but by the absense of any
  such element in XML. A response that generates no results will return an empty
  <code>routes</code> array in JSON, but no <code>&lt;route&gt;</code> elements in XML,
  for example.</li>
</ul>

<h2 id="DirectionsResponseElements">Directions Response Elements</h2>

<p>Directions responses contain two root elements:</p>
<ul>
<li><code>"status"</code> contains metadata on the request. See
<a href="#StatusCodes">Status Codes</a> below.</li>
<li><code>"routes"</code> contains an array of routes from the origin to
the destination. See <a href="#Routes">Routes</a> below.</li>
</ul>

<p>Routes consist of nested <a href="#DirectionsLegs">Legs</a> and
<a href="#DirectionsSteps">Steps</a>.</p>

<h3 id="StatusCodes">Status Codes</h3>

<p>The <code>"status"</code> field within the Directions response object contains the status
of the request, and may contain debugging information to help you track down why the
Directions service failed. The <code>"status"</code> field may contain the following
values:</p>

<ul>
  <li><code>OK</code> indicates the response contains a
  valid <code>result</code>.</li>
  <li><code>NOT_FOUND</code> indicates at least one of the
  locations specified in the requests's origin, destination, or
  waypoints could not be geocoded.</li>
  <li><code>ZERO_RESULTS</code> indicates no route could be found
  between the origin and destination.</li>
  <li><code>MAX_WAYPOINTS_EXCEEDED</code> indicates that too
  many <code>waypoints</code>s were provided
  in the request The maximum allowed
  <code>waypoints</code> is 8, plus the origin, and destination. (
  <a href="../premier/index.html">Google Maps Premier</a>
  customers may contain requests with up to 23
  waypoints.)</li>
  <li><code>INVALID_REQUEST</code> indicates that the
  provided request was invalid.</li>
  <li><code>OVER_QUERY_LIMIT</code> indicates the service has
  received too many requests from your application within the allowed
  time period.</li>
  <li><code>REQUEST_DENIED</code> indicates that the service denied
  use of the directions service by your application.</li>
  <li><code>UNKNOWN_ERROR</code> indicates a directions request
  could not be processed due to a server error. The request may
  succeed if you try again.</li>
</ul>

<h3 id="Routes">Routes</h3>

<p>When the Directions API returns results, it places them
within a (JSON) <code>routes</code> array. Even if the service returns
no results (such as if the origin and/or destination doesn't exist) it
still returns an empty <code>routes</code> array. (XML responses consist
of zero or more <code>&lt;route&gt;</code> elements.)</p>

<p>Each element of the <code>routes</code> array contains a single result
from the specified origin and destination. This route may consist of
one or more <code>legs</code> depending on whether any waypoints
were specified. As well, the route also contains copyright and warning
information which must be displayed to the user in addition to the
routing information.</p>

<p>Each route within the <code>routes</code> field may contain
the following fields:</p>

<ul>
  <li><code>summary</code> contains a short textual description
  for the route, suitable for naming and disambiguating the route
  from alternatives.</li>
  <li><code>legs[]</code> contains an array which contains
  information about a leg of the route, between two locations
  within the given route. A separate leg will be present for each
  waypoint or destination specified. (A route with no waypoints will contain
  exactly one leg within the <code>legs</code> array.) Each leg consists
  of a series of <code>steps</code>. (See <a href="#DirectionsLegs">
  Directions Legs</a> below.)</li>
  <li><code>waypoint_order</code> contains an array
  indicating the order of any waypoints in the calculated
  route. This waypoints may be reordered if the
  request was passed <code>optimize:true</code> within its
  <code>waypoints</code> parameter.</li>
  <li><code>overview_polyline</code> contains an object holding an
  array of encoded <code>points</code> and <code>levels</code> that
  represent an approximate (smoothed)
  path of the resulting directions.</li>
  <li><code>copyrights</code> contains the copyrights text to be
  displayed for this route. You must handle and
  display this information yourself.</li>
  <li><code>warnings[]</code> contains an array of warnings
  to be displayed when showing these directions. You must
  handle and display these warnings yourself.</li>
</ul>

<h3 id="Legs">Legs</h3>

<p>Each element in the <code>legs</code> array specifies a single leg
of the journey from the origin to the destination in the calculated
route. For routes that contain no waypoints, the route will consist
of a single "leg," but for routes that define one or more
waypoints, the route will consist of one or more legs, corresponding
to the specific legs of the journey.</p>

<p>Each leg within the <code>legs</code> field(s) may contain
the following fields:</p>

<ul>
  <li><code>steps[]</code> contains an array of
  steps denoting information about each separate step of
  the leg of the journey. (See <a href="DirectionsSteps">
  Directions Steps</a> below.)</li>
  <li><p><code>distance</code> indicates the total distance covered
  by this leg, as a field with the following elements:</p>
    <ul>
      <li><code>value</code> indicates the distance in meters</li>
      <li><code>text</code> contains a human-readable representation
      of the distance, displayed in units as
      used at the origin (or as overridden within the <code>units</code>
      parameter in the request), in the language specified in the request. 
      (For example, miles and feet will be used for
      any origin within the United States.) Note that regardless
      of what unit system is displayed as text, the
      <code>distance.value</code> field always contains a value
      expressed in meters.</li>
    </ul>
  <p>These fields may be absent if the distance is unknown.</p>
  </li>
  <li><p><code>duration</code> indicates the total duration of
  this leg, as a field with the following elements:</p>
    <ul>
      <li><code>value</code> indicates the duration in
      seconds.</li>
      <li><code>text</code> contains a human-readable representation
      of the duration.</li>
    </ul>
  <p>These fields may be absent if the duration is unknown.</p>
  </li>
  <li><code>start_location</code> contains the latitude/longitude
  coordinates of the origin of this leg. Because the Directions
  API calculates directions between locations by using
  the nearest transportation option (usually a road) at the start 
  and end points, <code>start_location</code> may be different
  than the provided origin of this leg if, for example, a road
  is not near the origin.</li>
  <li><code>end_location</code> contains the latitude/longitude
  coordinates of the given destination of this leg. Because the
  Directions API calculates directions between locations
  by using the nearest transportation option (usually a road) at
  the start and end points, <code>end_location</code> may be
  different than the provided destination of this leg if, for
  example, a road is not near the destination.</li>
  <li><code>start_address</code> contains the human-readable
  address (typically a street address) reflecting the
  <code>start_location</code> of this leg.</li>
  <li><code>end_addresss</code> contains the human-readable
  address (typically a street address) reflecting the
  <code>end_location</code> of this leg.</li>
</ul>

<h3 id="Steps">Steps</h3>

<p>Each element in the <code>steps</code> array defines a single step
of the calculated directions. A step is the most atomic unit of a
direction's route, containing a single step describing a specific, single
instruction on the journey. E.g. "Turn left at W. 4th St." The step not
only describes the instruction but also contains distance and duration
information relating to how this step relates to the following step.
For example, a step denoted as "Merge onto I-80 West" may contain a
duration of "37 miles" and "40 minutes," indicating that the next step
is 37 miles/40 minutes from this step.</p>

<p>Each step within the <code>steps</code> field(s) may contain
the following fields:</p>

<ul>
<li><code>html_instructions</code> contains formatted instructions
for this step, presented as an HTML text string.</li>
<li><code>distance</code> contains the distance covered by this
step until the next step. (See the discussion of this field
in <a href="#DirectionsLegs">Directions Legs</a> above.) This field
may be undefined if the distance is unknown.</li>
<li><code>duration</code> contains the typical time required to
perform the step, until the next step (See the description in
<a href="#DirectionsLegs">Directions Legs</a> above.) This field
may be undefined if the duration is unknown.</li>
<li><code>start_location</code> contains the location of
the starting point of this step, as a single set of
<code>lat</code> and <code>lng</code> fields.</li>
<li><code>end_location</code> contains the location of
the starting point of this step, as a single set of
<code>lat</code> and <code>lng</code> fields.</li>
</ul>
        <!-- end body text -->

   
      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
    &copy;2010 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://code.google.com/terms.html">Terms of Service</a> -
    <a href="http://code.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://code.google.com/more">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="http://code.google.com/intl/en">English</a> -
    <a href="http://code.google.com/intl/es">Español</a> -
    <a href="http://code.google.com/intl/ja">日本語</a> -
    <a href="http://code.google.com/intl/ko">한국어</a> -
    <a href="http://code.google.com/intl/pt-BR">Português</a> -
    <a href="http://code.google.com/intl/ru">Pусский</a> -
    <a href="http://code.google.com/intl/zh-CN">中文(简体)</a> -
    <a href="http://code.google.com/intl/zh-TW">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="../../../../js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>

