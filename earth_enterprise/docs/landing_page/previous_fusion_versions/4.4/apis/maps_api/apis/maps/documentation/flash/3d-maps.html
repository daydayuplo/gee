<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">








 
 



 
  

  


<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/apis/maps/documentation/flash/3d-maps.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Google Maps API for Flash - 3D Maps - Google Maps API for Flash - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/html/apis/maps/documentation/flash/_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="../../../../css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="../../../../js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../../../css/iehacks.css"><![endif]-->

  <link href="../local_extensions.css" rel="stylesheet" type="text/css" />
  </head>

  <body class="gc-documentation">

    <div id="gb">
 <span>
  
    <a id="lang-dropdown" href="http://code.google.com" onclick="return false;"><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  
  
</div>

<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
  
     <img src="../images/code_logo.gif" height="40" width="167" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "adwords" or "open source"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->




</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google Maps API for Flash</h1>
  <ul id="docs" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="index.html" title="Google Maps API for Flash home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="intro.html" class="selected" title="Official Google Maps API for Flash documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../../faq.html" title="Answers to frequently asked questions about Google Maps API for Flash">FAQ</a>
    </li>
  
    <li id="articles_link">
      <a href="articles.html" title="Focused articles and tutorials for Google Maps API for Flash developers">Articles</a>
    </li>
  
    <li>
      <a href="http://googlegeodevelopers.blogspot.com/" title="Official Google Maps API for Flash blog">Blog</a>
    </li>
  
    <li>
      <a href="forum.html" title="Google Maps API for Flash developer forum">Forum</a>
    </li>
  
    <li>
      <a href="../../terms.html" title="Google Maps API for Flash terms of service">Terms</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-170">

      <a name="gc-toc-anchor"></a>  
      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li><a href="../../index.html">Maps API Family</a></li>
  <li><a href="../../signup.html">Sign up for an API key</a></li>
  <li><a href="http://code.google.com/apis/kml/documentation/kmlSearch.html">Index Your Maps Content</a></li>
</ul>
  <div class="line"></div>
    <ul>
      <li><h2>Maps API for Flash</h2>
        <ul>
          <li><a class="tlw-expanded" href="intro.html">Developer Guide</a>
            <ul>
              <li><h2 class="tlw-expanded">Tutorials</h2>
                <ul>
                  <li><a href="tutorial-flex.html">Flex SDK</a></li>
                  <li><a href="tutorial-flexbuilder.html">FlexBuilder</a></li>
                  <li><a href="tutorial-flash.html">Flash CS3</a></li>                
                </ul>              
              </li>
              <li><a href="basics.html">Basics</a></li>
              <li><a href="events.html">Events</a></li>
              <li><a href="controls.html">Controls</a></li>
              <li><a href="overlays.html">Overlays</a></li>
              <li><a href="services.html">Services</a></li>
              <li><a href="maptypes.html">Map Types</a></li>           
              <li><a href="3d-maps.html">3D Maps</a></li>
            </ul>                                
          </li>
          <li><a href="reference.html">API Reference</a></li>
          <li><h2 class="tlw-expanded">Code Samples:</h2>
            <ul>
              <li><a href="demogallery.html">Demos</a></li>
              <li><a href="examples/index.html">Examples</a></li>
            </ul>
          </li>
          <li><h2 class="tlw-expanded">More Resources:</h2>
               <ul>
               <li><a href="articles.html">Articles</a></li>
               <li><a href="mediagallery.html">Presentations</a></li>
               <li><a href="http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype%3AFlash&colspec=ID+Type+Status+Introduced+Fixed+Summary+Internal+Stars&cells=tiles">Known Issues</a></li>
               <li><a href="http://code.google.com/p/gmaps-api-issues/wiki/MapsAPIforFlashChangelog">Changelog</a><sup class="new">New!</sup></li>
               <li><a href="http://code.google.com/p/gmaps-utility-library-flash/">Utility Library</a></li>
              </ul>
           </li>
        </ul>
      </li>
    </ul>    
      <div class="line"></div>
      <ul>
        <li><h2>Maps JavaScript API V3</h2>
         <ul>
           <li><a href="../javascript/index.html">Home Page</a></li>
           <li><a href="../javascript/basics.html">Documentation</a></li>
         </ul>
       </li>
      </ul>
            <ul>
        <li><h2>Maps Javascript API V2</h2>
         <p><span style="color:grey">(Deprecated API)</span></p>
         <ul>
           <li><a href="../javascript/v2/index.html">Home Page</a></li>
           <li><a href="../javascript/v2/basics.html">Documentation</a></li>
         </ul>
       </li>
      </ul>
    <div class="line"></div>
    <ul>
      <li><h2>Maps Data API</h2>
        <p><span style="color:grey">(Deprecated API)</span></p>
        <ul>
          <li><a href="../mapsdata/index.html">Home Page</a></li>
          <li><a href="../mapsdata/developers_guide_protocol.html">Documentation</a></li>
        </ul>
      </li>
    </ul>
    <div class="line"></div>
      <ul>
        <li><h2><a href="../webservices/index.html">Maps API Web Services</a></h2>
         <ul>
           <li><a href="../geocoding/index.html">Geocoding API</a></li>
           <li><a href="../directions/index.html">Directions API</a></li>
           <li><a href="../elevation/index.html">Elevation API</a></li>
           <li><a href="../places/index.html">Places API</a></li>
         </ul>
       </li>
      </ul>
       <div class="line"></div>
        <ul>
          <li><h2>Static Maps API</h2>
            <ul>
              <li><a href="../staticmaps/index.html">Developer Guide</a></li>
            </ul>
          </li>
        </ul>
    <div class="line"></div>
        <ul>
          <li><h2>Earth API</h2>
            <ul>
              <li><a href="http://code.google.com/apis/earth">Home Page</a></li>
              <li><a href="http://code.google.com/apis/earth/documentation">Documentation</a></li>
            </ul>
          </li>
        </ul>
    <div class="line"></div>
    <div class="promo">
      <p><a href="../premier/index.html">Google Maps API Premier</a></p>
      <p>Includes enterprise licensing and support</p>
    </div>

      </div>
      
      <a name="gc-pagecontent-anchor"></a>   
      <div class="g-unit" id="gc-pagecontent">
        <h1 class="page_title">Google Maps API for Flash - 3D Maps</h1>


<div class="toc">
 <ol>
  <li><a href="#Introduction">Introduction</a></li>
  <li><a href="#Flash10">Compiling for Flash 9/10</a></li>
  <li><a href="#3DMaps">The Map3D Object</a></li>
  <li><a href="#MapAttitude">The Map Attitude</a></li>
  <li><a href="#3DControls">3D Controls</a></li>
  <li><a href="#MapViewModes">Map View Modes</a></li>
  <li><a href="#FlyTo">Animating Location Changes</a></li>
  <li><a href="#Coordinates">Coordinate Transformations</a></li>
 </ol>
</div>

<h1 id="Introduction" name="Introduction">Introduction</h1>

<p>The Google Maps API for Flash now contains support for three-dimensional 
(3D) maps. 3D maps using the Maps API for Flash are shown using a realistic
perspective much like that used within Google Earth.</p>

<p>Use of 3D maps within the Google Maps API for Flash requires use of a
new object, the <code>Map3D</code> object, which is used in place of the
standard <code>Map</code> object. Rendering of 3D maps is supported on both
Flash 9 and Flash 10 players. However, due to geometry support, use of Flash
10 is recommended as it results in faster rendering. Consult
<a href="#Flash10">Compiling for Flash 9/10</a> for more information about
how to compile your applications for Flash 9 or 10.</p>

<p>This guide illustrates how to use the <code>Map3D</code> object to create
a 3D map, how to manipulate the view of the map, and how to transform
coordinates on the map into screen coordinates (and vice versa). Developers
should make sure they understand the concepts documented in the tutorials of
this documentation set before reading this section.</p>

<p>Support for three-dimensional maps is new. We encourage you to post
questions and feature requests to the Google Maps API for Flash forum.</p>

<h1 id="Flash10" name="Flash10">Compiling for Flash 9/10</h1>

<p>Although applications built using Google Maps API for Flash will work in
both Flash 9 and Flash 10 players, 3D maps take advantage of advanced
geometry support in Flash 10, so we recommend that you build your
applications for that player.</p>

<p>Note that if you build your applications for Flash 10, but use no code
specific to Flash 10, your applications will still work in both Flash 9 or
Flash 10, and provide a much better user experience on Flash 10 capable
browsers. However, if you do use specific classes/methods for Flash 10,
browsers using Flash 9 will throw an error using your applications; in those
cases, you may wish to compile separate versions of your application for
Flash 9 and for Flash 10.</p>

<p>To compile for Flash 10, you may require a later version of the Flex
SDK which contains SWC files for the Flash 10 player. For the latest Flex
SDK links, consults 
<a href="http://www.adobe.com/products/flex/flexdownloads/">Adobe's Flex
downloads page</a>.</p>

<p>You will also need to update the Flex SDK or Flex Builder to reference
the Flash 10 player SWC appropriately. Consult 
<a href="http://opensource.adobe.com/wiki/display/flexsdk/Targeting+Flash+Player+10+Beta+with+Flex+SDK+3.0.x">
Adobe's instructions</a> for updating the Flex SDK and Flex Builder to
compile for Flash 10. Note that you may need to exit Flex Builder and
restart for the settings to take effect.</p>

<h1 id="3DMaps" name="3DMaps">The 3DMap Object</h1>

<p>To add 3D capabilities to your map, you simply need to make the following
changes to your code:</p>

<ul>
  <li>Import the <code>com.google.maps.Map3D</code>, <code>
  com.google.maps.View</code>, and <code>com.google.maps.geom.Attitude
  </code> classes.</li>
  <li>Instead of extending a <code>Map</code> object, extend a <code>Map3D
  </code> object.</li>
  <li>Within the map's <code>MAP_PREINITIALIZE</code> event, set the map's
  view to <code>VIEWMODE_PERSPECTIVE</code>
  <li>Optionally, you can also set an initial <i>attitude</i> for the map to
  display at an oblique angle. The attitude defines the angle of the map in
  several directions.</li>
</ul>

<p>The following code displays a map of New York City, but uses a 3D map and
initializes it with an oblique angle:</p>

<pre class="prettyprint">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute"&gt;
 &lt;maps:Map3D xmlns:maps="com.google.maps.*" mapevent_mappreinitialize="onMapPreinitialize(event)" id="map" 
 	width="100%" height="100%" key="<i>your_api_key</i>" sensor="<i>true_or_false</i>"/&gt;
&lt;mx:Script&gt;
  &lt;![CDATA[
  import com.google.maps.LatLng;
  import com.google.maps.Map3D;
  import com.google.maps.MapEvent;
  import com.google.maps.MapOptions;
  import com.google.maps.MapType;
  import com.google.maps.View;
  import com.google.maps.geom.Attitude;

  private function onMapPreinitialize(event:MapEvent):void {
    var myMapOptions:MapOptions = new MapOptions();
    myMapOptions.zoom = 12;
    myMapOptions.center = new LatLng(40.756054, -73.986951);
    myMapOptions.mapType = MapType.NORMAL_MAP_TYPE;
    myMapOptions.viewMode = View.VIEWMODE_PERSPECTIVE;
    myMapOptions.attitude = new Attitude(20,30,0);
    map.setInitOptions(myMapOptions);
  }
  ]]&gt;
&lt;/mx:Script&gt;
&lt;/mx:Application&gt;
</pre>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/Map3DSimple.html">
View example (Map3DSimple.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/Map3DSimple.mxml">
View Source (Map3DSimple.mxml)</a></p>

<p>Note that you will need an API key (either within the hosted HTML file or
the SWF itself) to get this map to display.</p>

<h1 id="MapAttitude" name="MapAttitude">The Map Attitude</h1>

<p>In the above example, we defined an <i>Attitude</i> for the map. 
The attitude is a value of type <code>com.google.maps.geom.Attitude</code>
which defines the angles of incidence for the map, as seen from the viewer's
perspective (which we call the "camera").</p>

<p>These angles of incidence are three values:</p>

<ul>
  <li><code>yaw</code> defines the "direction" of the camera with respect 
  to north. A <code>yaw</code> of <code>0</code> corresponds to looking 
  straight north.</li>
  <li><code>pitch</code> defines the angle of incidence of the camera with
  respect to the map's horizon. By default, a <code>pitch</code> of zero
  points corresponds to looking straight down at the map.</li>
  <li><code>roll</code> defines the angle of incidence of the camera with
  respect to its "footing" (if you are standing, this would be the floor
  below you). By altering roll, you can place yourself upside down, for
  example.</p>
</ul>

<p style="text-align:center">
<img src="images/3d_roll-yaw-pitch.png">
</p>

<p>Pitch, yaw, and roll are commonly used within aeronautical (and
astronautical) engineering to define the orientation of an aircraft and its
flight dynamics. For more information, see the Wikipedia article on 
<a href="http://en.wikipedia.org/wiki/Flight_dynamics">Flight Dynamics</a>.
</p>

<p>In the code sample below, you can independently set either <code>yaw</code> or
<code>pitch</code>. Note that <code>pitch</code> values greater than 70 degrees
are not allowed (the value will be floored to 70) and the <code>roll</code> value
is currently ignored within <code>Attitude</code> declarations.</p>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/Map3DAttitude.html">
View example (Map3DAttitude.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/Map3DAttitude.mxml">
View Source (Map3DAttitude.mxml)</a></p>

<h1 id="3DControls" name="3DControls">Controlling a 3D Map</h1>

<p>You can manipulate the 3D map using the same keyboard controls as you use
on Google Earth and within the Maps API. Clicking and dragging moves the map
in the direction being dragged, as you would expect. When dragging the map
while holding down an optional modifier key, however, you can alter the
attitude of the map:</p>

<ul>
  <li><b>SHIFT</b> alters the rotation and attitude of the map around a
  clicked point.</li>
  <li><b>CTRL</b> (or the Apple key) alters the rotation and attitude of
  the map from the point of view of the camera. </li>
</ul>

<p>A full list of keyboard controls is available within the
<a href="http://earth.google.com/userguide/v4/ug_keyboard.html#3dviewer">
Google Earth User Guide</a>.</p>

<p>You may also add a <code>NavigationControl</code> that contains panning, 
zooming and attitude sub-controls. Adding such a control is recommended as the
control automatically includes appropriate controls for manipulating 3D maps. To
do so, declare a handler for the <code>MAP_READY</code> event and add the
control:</p>

<pre class="prettyprint">
  import com.google.maps.controls.MapTypeControl;
  import com.google.maps.controls.NavigationControl;
  
...
// Modify the map declaration to add a mapevent_mapready event
 &lt;maps:Map3D xmlns:maps="com.google.maps.*" mapevent_mappreinitialize="onMapPreinitialize(event)" mapevent_mapready="onMapReady(event)" id="map" 
 	width="100%" height="100%" key="<i>your_api_key</i>" sensor="<i>true_or_false</i>"/&gt;
...

// Within the handler, add the control
private function onMapReady(event:MapEvent):void {
  map.addControl(new MapTypeControl());
  map.addControl(new NavigationControl());
}
</pre>

<h1 id="MapViewModes" name="MapViewModes">Map View Modes</h1>

<p>In the previous code sample, notice that the distance between two points on
the screen is greater towards the top of the screen than towards the bottom.
This behavior is due to the map being initialized with a view of <code>
VIEWMODE_PERSPECTIVE</code>. With a 
<a href="http://en.wikipedia.org/wiki/Perspective_(graphical)">perspective
</a> map, the map is projected on a viewport (the screen) using a virtual
point of reference in front of the screen (the <i>camera</i>). These three
components (the map, the viewport and the camera) form a perspective on the
viewport which gives the illusion of depth perception to the map. (See 
illustration below.)</p>

<div style="text-align:center">
<img src="images/3d_projection.png">
</div>

<p>The <code>Map3D</code> object contains a <code>view</code> property
which indicates what sort of view the 3D map should exhibit. This view is a
class of type <code>com.google.maps.View</code> which may contain the
following values:</p>

<ul>
  <li><code>VIEWMODE_2D</code> A standard two-dimensional map. Use this view
  if you want the 3D map to exhibit the same look and feel as a standard
  map.</li>
  <li><code>VIEWMODE_PERSPECTIVE</code> constructs a map view using a 3D
  perspective based on a "camera's" point of reference. Perspectives are
  only possible within the Google Maps API for Flash for maps looking 
  "ahead." It is not possible to alter a map so that it "looks behind."</li>
  <li><code>VIEWMODE_ORTHOGONAL</code> creates a map with oblique angles but
  no perspective. Effectively, all distances are equidistant along the
  longitudinal and latitudinal axes of the map.</li>
</ul>

<p>The view <code>VIEWMODE_PERSPECTIVE</code> view is graphically intensive
and may work slower on Flash 9, which does not have as advanced geometry
support as Flash 10. For that reason, you may also use <code>
VIEWMODE_ORTHOGONAL</code> which displays a map at a oblique angle, but does
not add perspective. (Effectively, this map eliminates perspective by
placing the camera at an infinite distance to the viewport and map.)</p>

<p>The following code displays the same map of New York City as above but
uses a <code>VIEWMODE_ORTHOGONAL</code> map:</p>

<pre class="prettyprint">
  import com.google.maps.LatLng;
  import com.google.maps.Map3D;
  import com.google.maps.MapEvent;
  import com.google.maps.MapOptions;
  import com.google.maps.MapType;
  import com.google.maps.View;
  import com.google.maps.controls.MapTypeControl;
  import com.google.maps.controls.NavigationControl;
  import com.google.maps.geom.Attitude;

  private function onMapPreinitialize(event:MapEvent):void {
    var myMapOptions:MapOptions = new MapOptions();
    myMapOptions.zoom = 12;
    myMapOptions.center = new LatLng(40.756054, -73.986951);
    myMapOptions.mapType = MapType.NORMAL_MAP_TYPE;
    myMapOptions.viewMode = View.VIEWMODE_ORTHOGONAL;
    myMapOptions.attitude = new Attitude(20,30,0);
    map.setInitOptions(myMapOptions);
  }

  private function onMapReady(event:MapEvent):void {
    map.addControl(new NavigationControl());
    map.addControl(new MapTypeControl());
  }
</pre>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/Map3DOrthogonal.html">View example (Map3DOrthogonalSimple.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/Map3DOrthogonal.mxml">
View Source (Map3DOrthogonal.mxml)</a></p>

<p>Notice that when you manipulate the map, you change its attitude but all
distances are still equidistant on the map. At lower levels of obliqueness,
this may not matter but at higher angles, it will be noticeable.</p>

<h1 id="FlyTo" name="FlyTo">Animating Location Changes</h1>

<p>The <code>Map3D</code> class provides a special <code>flyTo()</code> 
method for changing the location, zoom level and <code>Attitude</code> of 
the map through animation much like that used in Google Earth. The 
<code>flyTo()</code> method takes the following parameters:</p>

<ul>
<li>The <code>LatLng</code> at which to position the map's center</li>
<li>The zoom level to display at the new location</li>
<li>The <code>Attitude</code> to position the camera</li>
<li>The amount of time in seconds (as a floating point value) to effect
the animation</li>
</ul>

<p>Note that if you pass <code>0</code> for the time value that you will get
an instantaneous transition. Otherwise, the API will attempt a smooth
animated transition from the current location to the new location.</p>

<p>The following code geocodes submitted locations and positions the map to
the new location using the <code>flyTo()</code> method with a 5 second
animation.</p>

<pre class="prettyprint">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute"&gt;
 &lt;mx:Panel title="Google Maps 3D FlyTo Demo" width="100%" height="100%"&gt;
 &lt;mx:VBox width="100%" height="100%"&gt;
 &lt;mx:HBox width="100%" height="25"&gt;
  &lt;mx:Label
     text="Enter address: "/&gt;
  &lt;mx:TextInput
     id="address"
     text="Coney Island, Brooklyn, NY"
     dropShadowColor="0x000000"
     enter="doFlyTo(event);"
  /&gt;
  &lt;mx:Button
     id="submitButton" label="Search"
     click="doFlyTo(event);"
  /&gt;
 &lt;/mx:HBox&gt;
 &lt;maps:Map3D xmlns:maps="com.google.maps.*" 
 	mapevent_mappreinitialize="onMapPreinitialize(event)" 
 	mapevent_mapready="onMapReady(event)" 
 	id="map" 
 	key="<i>YOUR_API_KEY</i>" 
 	sensor="<i>true_or_false</i>"
 	width="100%" height="100%" /&gt;
 &lt;/mx:VBox&gt;
 &lt;/mx:Panel&gt;
&lt;mx:Script&gt;
&lt;![CDATA[
import com.google.maps.LatLng;
import com.google.maps.Map3D;
import com.google.maps.MapEvent;
import com.google.maps.MapMouseEvent;
import com.google.maps.services.GeocodingEvent;
import com.google.maps.services.ClientGeocoder;
import com.google.maps.overlays.Marker;
import com.google.maps.InfoWindowOptions;
import com.google.maps.MapOptions;
import com.google.maps.MapType;
import com.google.maps.View;
import com.google.maps.controls.NavigationControl;
import com.google.maps.geom.Attitude;
import mx.controls.Alert;

private function onMapPreinitialize(event:MapEvent):void {
  var myMapOptions:MapOptions = new MapOptions;
  myMapOptions.zoom = 12;
  myMapOptions.center = new LatLng(40.756054, -73.986951);
  myMapOptions.mapType = MapType.PHYSICAL_MAP_TYPE;
  myMapOptions.viewMode = View.VIEWMODE_PERSPECTIVE;
  myMapOptions.attitude = new Attitude(20,30,0);
  this.map.setInitOptions(myMapOptions);
}

private function onMapReady(event:MapEvent):void {
  this.map.addControl(new NavigationControl());
}

private function doFlyTo(event:Event):void {
  // Instantiate a Geocoder
  var geocoder:ClientGeocoder = new ClientGeocoder();
      
  // Add an event listener for a GEOCODING SUCCESS  
  geocoder.addEventListener(
      GeocodingEvent.GEOCODING_SUCCESS,
      function(event:GeocodingEvent):void {
        var placemarks:Array = event.response.placemarks;
        if (placemarks.length &gt; 0) {
          map.flyTo(placemarks[0].point,12,new Attitude(20,30,0),3);
          var marker:Marker = new Marker(placemarks[0].point);   
          marker.addEventListener(MapMouseEvent.CLICK, function (event:MapMouseEvent):void {
            marker.openInfoWindow(new InfoWindowOptions({content: placemarks[0].address}));
          });
          map.addOverlay(marker);
        }
      }
  );
    
  geocoder.addEventListener(
      GeocodingEvent.GEOCODING_FAILURE,
      function(event:GeocodingEvent):void {
        Alert.show("Geocoding failed");
        trace(event);
        trace(event.status);
      }
  );
  
  geocoder.geocode(address.text);
}
]]&gt;
&lt;/mx:Script&gt;
&lt;/mx:Application&gt;
</pre>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/Map3DFlyTo.html">View example (Map3DFlyTo.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/Map3DFlyTo.mxml">
View Source (Map3DFlyTo.mxml)</a></p>

<h1 id="Coordinates" name="Coordinates">Coordinate Transformations</h1>

<p>Unlike a standard two-dimensional map, a three-dimensional map requires
greater understanding of how the map is viewed and placed on the screen.
This understanding not only affects the overall view of the map, but how to
interact with it and how to translate coordinates from one coordinate 
system to another.</p>

<p>For a 3D map in the Google Maps API for Flash, the "camera" is the focus
of the perspective's origin. In general, you don't need to know the camera's
position; you're more interested in the result of the camera' position (the
view of the map within the viewport). However, you will need to know how to
translate coordinates between what the camera sees on the viewport and what
the map exhibits on the map at the oblique angle.</p>

<p>On a two-dimensional map, it is relatively straightforward to translate
between locations on a map (<code>LatLng</code> values) and locations on the
screen (pixels) because the map is oriented in the same direction in both
cases. For 3D maps, this is no longer the case, so we also supply "world
coordinates" defined as the pixel coordinates of the map if it were placed
at zoom level 0. World coordinates vary between (0,0) and (256,256) as shown
on the diagram below:</p>

<p style="text-align:center">
<img src="images/3d_coordinates.png">
</p>

<p>Viewport (screen) coordinates are shown in red, while world coordinates
are shown in green. Note that world coordinates wrap longitudinally, so that
world coordinate (259.999,0) is immediately adjacent to world coordinate 
(0,0). In the figure above, world coordinate (210,0) is at the right-hand
edge of the map; world coordinate (210.001,0) is at the left-hand edge of
the map.</p>

<p>The <code>ICamera</code> interface provides the <code>getTranslationGeometry()</code>
method for converting between these three coordinate systems, useful for placing
three-dimensional objects on the map. For full details, consult the 
<a href="reference.html#ICamera">Maps API for Flash Reference</a>.</p>

        <!-- end body text -->
   
      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
    &copy;2010 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://code.google.com/terms.html">Terms of Service</a> -
    <a href="http://code.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://code.google.com/more">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="http://code.google.com/intl/en">English</a> -
    <a href="http://code.google.com/intl/es">Español</a> -
    <a href="http://code.google.com/intl/ja">日本語</a> -
    <a href="http://code.google.com/intl/ko">한국어</a> -
    <a href="http://code.google.com/intl/pt-BR">Português</a> -
    <a href="http://code.google.com/intl/ru">Pусский</a> -
    <a href="http://code.google.com/intl/zh-CN">中文(简体)</a> -
    <a href="http://code.google.com/intl/zh-TW">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="../../../../js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>

