<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">








 
 



 
  

  


<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/apis/maps/documentation/flash/events.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Google Maps API for Flash Events - Google Maps API for Flash - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/html/apis/maps/documentation/flash/_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="../../../../css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="../../../../js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../../../css/iehacks.css"><![endif]-->

<link href="../local_extensions.css" rel="stylesheet" type="text/css" />
  </head>

  <body class="gc-documentation">

    <div id="gb">
 <span>
  
    <a id="lang-dropdown" href="http://code.google.com" onclick="return false;"><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  
  
</div>

<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
  
     <img src="../images/code_logo.gif" height="40" width="167" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "adwords" or "open source"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->




</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google Maps API for Flash</h1>
  <ul id="docs" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="index.html" title="Google Maps API for Flash home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="intro.html" class="selected" title="Official Google Maps API for Flash documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../../faq.html" title="Answers to frequently asked questions about Google Maps API for Flash">FAQ</a>
    </li>
  
    <li id="articles_link">
      <a href="articles.html" title="Focused articles and tutorials for Google Maps API for Flash developers">Articles</a>
    </li>
  
    <li>
      <a href="http://googlegeodevelopers.blogspot.com/" title="Official Google Maps API for Flash blog">Blog</a>
    </li>
  
    <li>
      <a href="forum.html" title="Google Maps API for Flash developer forum">Forum</a>
    </li>
  
    <li>
      <a href="../../terms.html" title="Google Maps API for Flash terms of service">Terms</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-170">

      <a name="gc-toc-anchor"></a>  
      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li><a href="../../index.html">Maps API Family</a></li>
  <li><a href="../../signup.html">Sign up for an API key</a></li>
  <li><a href="http://code.google.com/apis/kml/documentation/kmlSearch.html">Index Your Maps Content</a></li>
</ul>
  <div class="line"></div>
    <ul>
      <li><h2>Maps API for Flash</h2>
        <ul>
          <li><a class="tlw-expanded" href="intro.html">Developer Guide</a>
            <ul>
              <li><h2 class="tlw-expanded">Tutorials</h2>
                <ul>
                  <li><a href="tutorial-flex.html">Flex SDK</a></li>
                  <li><a href="tutorial-flexbuilder.html">FlexBuilder</a></li>
                  <li><a href="tutorial-flash.html">Flash CS3</a></li>                
                </ul>              
              </li>
              <li><a href="basics.html">Basics</a></li>
              <li><a href="events.html">Events</a></li>
              <li><a href="controls.html">Controls</a></li>
              <li><a href="overlays.html">Overlays</a></li>
              <li><a href="services.html">Services</a></li>
              <li><a href="maptypes.html">Map Types</a></li>           
              <li><a href="3d-maps.html">3D Maps</a></li>
            </ul>                                
          </li>
          <li><a href="reference.html">API Reference</a></li>
          <li><h2 class="tlw-expanded">Code Samples:</h2>
            <ul>
              <li><a href="demogallery.html">Demos</a></li>
              <li><a href="examples/index.html">Examples</a></li>
            </ul>
          </li>
          <li><h2 class="tlw-expanded">More Resources:</h2>
               <ul>
               <li><a href="articles.html">Articles</a></li>
               <li><a href="mediagallery.html">Presentations</a></li>
               <li><a href="http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype%3AFlash&colspec=ID+Type+Status+Introduced+Fixed+Summary+Internal+Stars&cells=tiles">Known Issues</a></li>
               <li><a href="http://code.google.com/p/gmaps-api-issues/wiki/MapsAPIforFlashChangelog">Changelog</a><sup class="new">New!</sup></li>
               <li><a href="http://code.google.com/p/gmaps-utility-library-flash/">Utility Library</a></li>
              </ul>
           </li>
        </ul>
      </li>
    </ul>    
      <div class="line"></div>
      <ul>
        <li><h2>Maps JavaScript API V3</h2>
         <ul>
           <li><a href="../javascript/index.html">Home Page</a></li>
           <li><a href="../javascript/basics.html">Documentation</a></li>
         </ul>
       </li>
      </ul>
            <ul>
        <li><h2>Maps Javascript API V2</h2>
         <p><span style="color:grey">(Deprecated API)</span></p>
         <ul>
           <li><a href="../javascript/v2/index.html">Home Page</a></li>
           <li><a href="../javascript/v2/basics.html">Documentation</a></li>
         </ul>
       </li>
      </ul>
    <div class="line"></div>
    <ul>
      <li><h2>Maps Data API</h2>
        <p><span style="color:grey">(Deprecated API)</span></p>
        <ul>
          <li><a href="../mapsdata/index.html">Home Page</a></li>
          <li><a href="../mapsdata/developers_guide_protocol.html">Documentation</a></li>
        </ul>
      </li>
    </ul>
    <div class="line"></div>
      <ul>
        <li><h2><a href="../webservices/index.html">Maps API Web Services</a></h2>
         <ul>
           <li><a href="../geocoding/index.html">Geocoding API</a></li>
           <li><a href="../directions/index.html">Directions API</a></li>
           <li><a href="../elevation/index.html">Elevation API</a></li>
           <li><a href="../places/index.html">Places API</a></li>
         </ul>
       </li>
      </ul>
       <div class="line"></div>
        <ul>
          <li><h2>Static Maps API</h2>
            <ul>
              <li><a href="../staticmaps/index.html">Developer Guide</a></li>
            </ul>
          </li>
        </ul>
    <div class="line"></div>
        <ul>
          <li><h2>Earth API</h2>
            <ul>
              <li><a href="http://code.google.com/apis/earth">Home Page</a></li>
              <li><a href="http://code.google.com/apis/earth/documentation">Documentation</a></li>
            </ul>
          </li>
        </ul>
    <div class="line"></div>
    <div class="promo">
      <p><a href="../premier/index.html">Google Maps API Premier</a></p>
      <p>Includes enterprise licensing and support</p>
    </div>

      </div>
      
      <a name="gc-pagecontent-anchor"></a>   
      <div class="g-unit" id="gc-pagecontent">
        <h1 class="page_title">Google Maps API for Flash Events</h1>


<div class="toc">
  <ol>
  <li><a href="#Events_Overview">Map Events Overview</a></li>
  <li><a href="#Event_Listeners">Event Listeners</a></li>
  <li><a href="#Event_Closures">Using Closures in Event Listeners</a></li>
  <li><a href="#Removing_Event_Listeners">Removing Event Listeners</a></li>
  </ol>
</div>

<h1 id="Events_Overview">Map Events Overview</h1>

<p>ActionScript within SWF files is <i>event driven</i>, meaning that
ActionScript responds to interactions by generating events, and expects
a program to <i>listen</i> to interesting events. For example, within 
a Flash file, user mouse and keyboard interactions create
events that propagate throughout the Flash UI. Events may also be generated
internally by the system when a state change occurs. Programs interested in
certain events will register ActionScript <b>event listeners</b> for those events
and execute code when those events are received.</p>

<p>Generally, UI events within Flash bubble up from leaf "targets" up to the container
objects, triggering events throughout the chain of objects. A click on a <code>DisplayObject</code>, 
for example, may trigger an event <code>MouseEvent.MOUSE_DOWN</code> on that object, and then 
pass that event up the hierarchy to any containing elements.</p>

<p>The Google Maps API for Flash adds to this event model by defining custom events
for objects within the API. It is important to note that the Maps API for Flash events 
are separate and distinct from the standard Flash events. Note that 
<code>MapEvent</code> events <i>may</i> bubble up from target objects to container 
objects, though events in the Google Maps API for Flash are generally designed 
with specific targets in mind.</p>

<h1 id="Event_Listeners">Event Listeners</h1>

<p>Events in the Google Maps API for Flash are defined within specific classes (such as
<code>MapEvent</code>) that contain an enumeration of all events specific
to the Maps API for Flash. Some of these events are UI events, while others are related
to state changes of the Maps API environment itself. Some events are designed with a specific
object in mind. For example, a <code>MapEvent.MAP_READY</code> event is triggered when 
the map object initializes and is ready to receive commands. This event should only be handled
by a <code>Map</code> object.</p>

<p>Other events are applicable to a wide variety of objects. For example, 
the <code>MapMouseEvent</code> <code>CLICK</code>, <code>DOUBLE_CLICK</code>, and <code>DRAG_STEP</code> 
events may be attached to <code>Map</code> objects or overlays, and may require different 
actions depending on the object receiving the event.</p>

<p>For a complete list of map event constants, see the 
<a href="reference.html#MapEvent">MapEvent</a>, 
<a href="reference.html#MapMouseEvent">MapMouseEvent</a>
and <a href="reference.html#MapMoveEvent">MapMoveEvent</a> reference documentation.</p>

<p>To register for notification of these events, use the 
<code>Map.addEventListener()</code> method. This method takes as arguments an event name 
and a function to call when the specified event occurs. For example, this code snippet 
displays an <code>InfoWindow</code> every time the user clicks on the map:</p>

<pre class="prettyprint">
private function onMapReady(event:MapEvent):void {
  map.setCenter(new LatLng(37.4419, -122.1419), 13, MapType.NORMAL_MAP_TYPE);
  map.addEventListener(MapMouseEvent.CLICK, onMapClick);
}
	
private function onMapClick(event:MapMouseEvent):void {
  map.openInfoWindow(event.latLng, 
    new InfoWindowOptions({title: "Click Event", content: "You clicked the map!"}));
}  
</pre>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/EventSimple.html">View example (EventSimple.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/EventSimple.mxml">
View Source (EventSimple.mxml)</a></p>

<p>Listeners are also able to determine the context of the event.
In the following example code, we display the latitude and longitude 
of the center of the map after the user drags the map.</p>

<pre class="prettyprint">
private function onMapReady(event:MapEvent):void {
  map.setCenter(new LatLng(37.4419, -122.1419), 13, MapType.NORMAL_MAP_TYPE);
  map.addEventListener(MapMoveEvent.MOVE_END, onMapMoveEnd);
}

private function onMapMoveEnd(event:MapMoveEvent):void {
  var center:LatLng = getCenter();
  map.openInfoWindow(getCenter(),
    new InfoWindowOptions({title: "Move Event", content: "MOVE_END generated on Map"}));
}
</pre>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/EventContext.html">View example (EventContext.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/EventContext.mxml">
View Source (EventContext.mxml)</a></p>

<h1 id="Event_Closures">Using Closures in Event Listeners</h1>

<p>When executing an event listener, it is often advantageous to have both private and persistent 
data attached to an object. ActionScript
supports <a href="http://www.jibbering.com/faq/faq_notes/closures.html" rel="nofollow">closures</a>
which allows inner functions to access outer variables. Closures are useful within event
listeners to access variables not normally attached to the objects on which events occur.</p>

<p>The following example uses a function closure in the event listener to assign a secret 
message to a set of markers. Clicking on each marker will review a portion of the
secret message, which is not contained within the marker itself.</p>

<pre class="prettyprint">
private var message:Array = ["This","is","the","secret","message"];

private function onMapReady(event:MapEvent):void {
  map.setCenter(new LatLng(37.4419, -122.1419), 13, MapType.NORMAL_MAP_TYPE);
  
  // Add 5 markers to the map at random locations
  // Note that we don't add the secret message to the marker's instance data
  var bounds:LatLngBounds = getLatLngBounds();
  var southWest:LatLng = bounds.getSouthWest();
  var northEast:LatLng = bounds.getNorthEast();
  var lngSpan:Number = northEast.lng() - southWest.lng();
  var latSpan:Number = northEast.lat() - southWest.lat();
  for (var i:Number = 0; i < 5; i++) {
    var latlng:LatLng = new LatLng(southWest.lat() + latSpan * Math.random(),
			southWest.lng() + lngSpan * Math.random());
	map.addOverlay(createMarker(latlng, i + 1));
  }
}

// Creates a marker at the given point
// Clicking the marker will hide it
private function createMarker(latlng:LatLng, number:Number):Marker {
  var marker:Marker = new Marker(latlng);
  marker.addEventListener(MapMouseEvent.CLICK, function(e:MapMouseEvent):void {
    var myTitle:String = "&lt;b&gt;#" + number + "&lt;/b&gt;";
    var myContent:String = message[number -1];
    map.openInfoWindow(latlng, new InfoWindowOptions({titleHTML: myTitle, contentHTML: myContent}));
  });
  return marker;
}
</pre>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/EventClosure.html">View example (EventClosure.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/EventClosure.mxml">
View Source (EventClosure.mxml)</a></p>

<h1 id="Removing_Event_Listeners">Removing Event Listeners</h1>

<p>When an event listener is no longer needed, you should remove it.
The following example responds to a click by placing a marker on the 
map and then removing the event listener immediately. Notice that you can remove
an event listener even from within the event listener itself.</p>

<pre class="prettyprint">
private function onMapReady(event:MapEvent):void {
  map.setCenter(new LatLng(37.4419, -122.1419), 13, MapType.NORMAL_MAP_TYPE);
  map.addEventListener(MapMouseEvent.CLICK, onMapClick);
}

private function onMapClick(event:MapMouseEvent):void {
  map.openInfoWindow(getCenter(), 
    new InfoWindowOptions({title: "Click Event", content: "You clicked the Map!"}));
  var marker:Marker = new Marker(getCenter());
  map.addOverlay(marker);
  map.removeEventListener(MapMouseEvent.CLICK, onMapClick);
}
</pre>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/EventRemoval.html">View example (EventRemoval.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/EventRemoval.mxml">
View Source (EventRemoval.mxml)</a></p>

        <!-- end body text -->

   
      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
    &copy;2010 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://code.google.com/terms.html">Terms of Service</a> -
    <a href="http://code.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://code.google.com/more">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="http://code.google.com/intl/en">English</a> -
    <a href="http://code.google.com/intl/es">Español</a> -
    <a href="http://code.google.com/intl/ja">日本語</a> -
    <a href="http://code.google.com/intl/ko">한국어</a> -
    <a href="http://code.google.com/intl/pt-BR">Português</a> -
    <a href="http://code.google.com/intl/ru">Pусский</a> -
    <a href="http://code.google.com/intl/zh-CN">中文(简体)</a> -
    <a href="http://code.google.com/intl/zh-TW">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="../../../../js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>

