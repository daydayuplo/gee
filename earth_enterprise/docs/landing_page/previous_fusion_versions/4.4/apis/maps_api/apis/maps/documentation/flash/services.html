<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">








 
 



 
  

  


<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/apis/maps/documentation/flash/services.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Google Maps API for Flash Services - Google Maps API for Flash - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/html/apis/maps/documentation/flash/_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="../../../../css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="../../../../js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../../../css/iehacks.css"><![endif]-->

<link href="../local_extensions.css" rel="stylesheet" type="text/css" />
  </head>

  <body class="gc-documentation">

    <div id="gb">
 <span>
  
    <a id="lang-dropdown" href="http://code.google.com" onclick="return false;"><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  
  
</div>

<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
  
     <img src="../images/code_logo.gif" height="40" width="167" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "adwords" or "open source"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->




</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google Maps API for Flash</h1>
  <ul id="docs" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="index.html" title="Google Maps API for Flash home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="intro.html" class="selected" title="Official Google Maps API for Flash documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../../faq.html" title="Answers to frequently asked questions about Google Maps API for Flash">FAQ</a>
    </li>
  
    <li id="articles_link">
      <a href="articles.html" title="Focused articles and tutorials for Google Maps API for Flash developers">Articles</a>
    </li>
  
    <li>
      <a href="http://googlegeodevelopers.blogspot.com/" title="Official Google Maps API for Flash blog">Blog</a>
    </li>
  
    <li>
      <a href="forum.html" title="Google Maps API for Flash developer forum">Forum</a>
    </li>
  
    <li>
      <a href="../../terms.html" title="Google Maps API for Flash terms of service">Terms</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-170">

      <a name="gc-toc-anchor"></a>  
      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li><a href="../../index.html">Maps API Family</a></li>
  <li><a href="../../signup.html">Sign up for an API key</a></li>
  <li><a href="http://code.google.com/apis/kml/documentation/kmlSearch.html">Index Your Maps Content</a></li>
</ul>
  <div class="line"></div>
    <ul>
      <li><h2>Maps API for Flash</h2>
        <ul>
          <li><a class="tlw-expanded" href="intro.html">Developer Guide</a>
            <ul>
              <li><h2 class="tlw-expanded">Tutorials</h2>
                <ul>
                  <li><a href="tutorial-flex.html">Flex SDK</a></li>
                  <li><a href="tutorial-flexbuilder.html">FlexBuilder</a></li>
                  <li><a href="tutorial-flash.html">Flash CS3</a></li>                
                </ul>              
              </li>
              <li><a href="basics.html">Basics</a></li>
              <li><a href="events.html">Events</a></li>
              <li><a href="controls.html">Controls</a></li>
              <li><a href="overlays.html">Overlays</a></li>
              <li><a href="services.html">Services</a></li>
              <li><a href="maptypes.html">Map Types</a></li>           
              <li><a href="3d-maps.html">3D Maps</a></li>
            </ul>                                
          </li>
          <li><a href="reference.html">API Reference</a></li>
          <li><h2 class="tlw-expanded">Code Samples:</h2>
            <ul>
              <li><a href="demogallery.html">Demos</a></li>
              <li><a href="examples/index.html">Examples</a></li>
            </ul>
          </li>
          <li><h2 class="tlw-expanded">More Resources:</h2>
               <ul>
               <li><a href="articles.html">Articles</a></li>
               <li><a href="mediagallery.html">Presentations</a></li>
               <li><a href="http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype%3AFlash&colspec=ID+Type+Status+Introduced+Fixed+Summary+Internal+Stars&cells=tiles">Known Issues</a></li>
               <li><a href="http://code.google.com/p/gmaps-api-issues/wiki/MapsAPIforFlashChangelog">Changelog</a><sup class="new">New!</sup></li>
               <li><a href="http://code.google.com/p/gmaps-utility-library-flash/">Utility Library</a></li>
              </ul>
           </li>
        </ul>
      </li>
    </ul>    
      <div class="line"></div>
      <ul>
        <li><h2>Maps JavaScript API V3</h2>
         <ul>
           <li><a href="../javascript/index.html">Home Page</a></li>
           <li><a href="../javascript/basics.html">Documentation</a></li>
         </ul>
       </li>
      </ul>
            <ul>
        <li><h2>Maps Javascript API V2</h2>
         <p><span style="color:grey">(Deprecated API)</span></p>
         <ul>
           <li><a href="../javascript/v2/index.html">Home Page</a></li>
           <li><a href="../javascript/v2/basics.html">Documentation</a></li>
         </ul>
       </li>
      </ul>
    <div class="line"></div>
    <ul>
      <li><h2>Maps Data API</h2>
        <p><span style="color:grey">(Deprecated API)</span></p>
        <ul>
          <li><a href="../mapsdata/index.html">Home Page</a></li>
          <li><a href="../mapsdata/developers_guide_protocol.html">Documentation</a></li>
        </ul>
      </li>
    </ul>
    <div class="line"></div>
      <ul>
        <li><h2><a href="../webservices/index.html">Maps API Web Services</a></h2>
         <ul>
           <li><a href="../geocoding/index.html">Geocoding API</a></li>
           <li><a href="../directions/index.html">Directions API</a></li>
           <li><a href="../elevation/index.html">Elevation API</a></li>
           <li><a href="../places/index.html">Places API</a></li>
         </ul>
       </li>
      </ul>
       <div class="line"></div>
        <ul>
          <li><h2>Static Maps API</h2>
            <ul>
              <li><a href="../staticmaps/index.html">Developer Guide</a></li>
            </ul>
          </li>
        </ul>
    <div class="line"></div>
        <ul>
          <li><h2>Earth API</h2>
            <ul>
              <li><a href="http://code.google.com/apis/earth">Home Page</a></li>
              <li><a href="http://code.google.com/apis/earth/documentation">Documentation</a></li>
            </ul>
          </li>
        </ul>
    <div class="line"></div>
    <div class="promo">
      <p><a href="../premier/index.html">Google Maps API Premier</a></p>
      <p>Includes enterprise licensing and support</p>
    </div>

      </div>
      
      <a name="gc-pagecontent-anchor"></a>   
      <div class="g-unit" id="gc-pagecontent">
        <h1 class="page_title">Google Maps API for Flash Services</h1>


<div class="toc">
  <ol>
  <li><a href="#Services_Overview">Services Overview</a>
  <li><a href="#Geocoding">Geocoding</a>
  <ol>
    <li><a href="#Geocoding_Object">The Geocoding Object</a></li>
    <li><a href="#Geocoding_Events">Geocoding Events and Responses</a></li>
  </ol>
  </li>
  <li><a href="#Driving_Directions">Driving Directions</a>
  <ol>
    <li><a href="#Initiating_Driving_Directions">Initiating Driving Directions</a></li>
    <li><a href="#TravelModes">Travel Modes</a></li>
    <li><a href="#ReturningDirections">Handling Returned Directions</a></li>
    <li><a href="#Routes_and_Steps">Routes and Steps</a></li>
  </ol>
  </li>
    <li><a href="#Elevation">Elevation</a>
    <ol>
    <li><a href="#ElevationRequests">Elevation Requests</a>
    <ol>
     <li><a href="#LocationElevationRequests">Location Elevation Requests</a></li>
     <li><a href="#PathElevationRequests">Path Elevation Requests</a>
    </ol>
  <li><a href="#ElevationResponses">Elevation Responses</a>
    <ol>
      <li><a href="#ElevationStatus">Elevation Status</a></li>
      <li><a href="#ElevationResults">Elevation Results</a></li>
    </ol>
  </li>
  </ol>
</div>
   
<h1 id="Services_Overview">Services Overview</h1>

<p>The Google Maps API for Flash will be regularly extended, adding new functionality 
and features that are often released on <a href="http://maps.google.com">maps.google.com
</a> first. This section covers Google Maps API for Flash features which
communicate with other Google services. As such, these communications are usually
asynchronous and require special handling.</p>

<h1 id="Geocoding">Geocoding</h1>

<p>Geocoding is the process of converting addresses (like "1600 Amphitheatre 
Parkway, Mountain View, CA") into geographic coordinates (like latitude 
37.423021 and longitude -122.083739), which you can use to place markers or 
position the map.</p>

<p>The Google Maps API for Flash provides a client geocoder for geocoding addresses 
dynamically from user input. If instead, you wish to geocode static, known addresses, 
see the <a href="../geocoding/index.html">Geocoding Service</a>
documentation.</p>

<h2 id="Geocoding_Object">The Geocoding Object</h2>

<p>Geocoding within the Google Maps API for Flash requires an asynchronous request to 
Google's servers. As a result, you cannot geocode an address through a simple function 
call. Instead, geocoding requires the following steps:</p>

<ol>
<li>Creation of a <code>ClientGeocoder</code> object</li>
<li>Registration of event listeners on that object for events of type 
<code>GeocodingEvent</code></li>
<li>Initiation of a geocode request via the <code>ClientGeocoder.geocode()</code></li>
</ol>

<p>The request will then be sent to Google's geocoding service. Receipt of a response will then
generate an event on the <code>ClientGeocoder</code>, and the geocoding response can be utilized.</p>

<h2 id="Geocoding_Events"></a> Geocoding Events and Responses</h2>

<p>The Google Maps API for Flash provides a <code>GeocodingEvent</code> for holding 
the response data associated with a geocoding request. This object enumerates two events:</p>

<ul>
<li><code>GEOCODING_SUCCESS</code></li>
<li><code>GEOCODING_FAILURE</code></li>
</ul> 

<p>You should set up event listeners for both cases. For example:</p>

<pre class="prettyprint">
var geocoder:ClientGeocoder = new ClientGeocoder();
geocoder.addEventListener(GeocodingEvent.GEOCODING_SUCCESS, handleGeocodingSuccess);
geocoder.addEventListener(GeocodingEvent.GEOCODING_FAILURE, handleGeocodingFailure);
</pre>

<p>In each case, the event returns information related to the geocoding request 
in the following properties of the <code>GeocodingEvent</code> itself:</p>

<ul>
<li><code>request</code> stores the original geocoding request as a text string.</li>
<li><code>requestType</code> stores the type of geocoding request (currently "geocoding" 
is the only request type).</li>
<li><code>response.name</code> stores the original geocoding request as a text string.</li>
<li><code>response.placemarks.address</code> stores the resolved address.</li>
<li><code>response.placemarks.addressDetails</code> stores address details conforming to 
<a href="http://www.oasis-open.org/committees/ciq/ciq.html#6">
xAL, or eXtensible Address Language</a>, an international standard for address
formatting.</li>
<li><code>response.placemarks.point</code> stores the <code>LatLng</code> of the geocoded address.</li>
<li><code>status</code> contains the status of the geocoding request and generally holds additional
information for why a geocoding attempt has failed, for example.</li>
</ul>

<p>(Note that the <code>GeocodingResponse.placemarks</code> property returns an array of KML Placemarks.)</p>

<p>Once you have set up proper handlers for the <code>GeocodingEvent</code> events, you can initiate a 
geocode request with the <code>ClientGeocoder.geocode()</code> method, which takes a string 
address as its sole argument.</p>

<p>In the following example, we instantiate a <code>ClientGeocoder</code>, add event listeners to
the <code>GeocodingEvent</code> events, and handle successful geocodes by moving the map to the
address, adding a marker, and adding an event listener to the marker that displays the address if
the marker is clicked.</p>

<pre class="prettyprint">
private function doGeocode(event:GeocodingEvent):void {
  var geocoder:ClientGeocoder = new ClientGeocoder();
  geocoder.addEventListener(GeocodingEvent.GEOCODING_SUCCESS,
      function(event:GeocodingEvent):void {
        var placemarks:Array = event.response.placemarks;
        if (placemarks.length > 0) {
          map.setCenter(placemarks[0].point);
          var marker:Marker = new Marker(placemarks[0].point);
          map.addOverlay(marker);
          marker.addEventListener(MapEvent.CLICK,
              function(event:MapEvent):void {
                marker.openInfoWindow(new InfoWindowOptions({
                  title: "Geocoded Result",
                  content: placemarks[0[]].address
                }));
              });
        }
      });
  geocoder.addEventListener(GeocodingEvent.GEOCODING_FAILURE,
        function(event:GeocodingEvent):void {
          trace("Geocoding failed");
        });
  geocoder.geocode(address.text);
}
</pre>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/GeocodingSimple.html">View example (GeocodingSimple.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/GeocodingSimple.mxml">
View Source (GeocodingSimple.mxml)</a></p>

<h1 id="Driving_Directions">Driving Directions</h1>

<p>You can add driving directions using the Google Maps API for Flash by using the 
<code>Directions</code> object. The <code>Directions</code> object requests 
results using either query strings (e.g. "New York, NY to 
Chicago, IL") or provided textual lat/lons (e.g. "40.712882, -73.967257 to 
41.943181,-87.770677"). You may request directions between two or more points by specifying
<i>waypoints</i>. For example, "New York, NY to Chicago, IL to San Francisco, CA" will result
in directions being returned for both segments.</p>

<h2 id="Initiating_Driving_Directions">Initiating Directions Requests</h2>

<P>Driving directions are requested using the asynchronous <code>Directions.load()</code> 
method. This method takes a query string and a set of optional <code>DirectionsOptions</code> 
parameters. Note that the directions object is not populated with return information immediately, 
as this information needs to be requested from Google's servers. For this reason, the 
<code>Directions</code> object defines the following two <code>DirectionsEvent</code> events 
which you can intercept to determine this state: <code>DIRECTIONS_SUCCESS</code> and
<code>DIRECTIONS_FAILURE</code>.</p>

<h2 id="TravelModes">Travel Modes</h2>

<p>By default, directions are assumed to be driving directions though you may request 
other modes of travel by passing a constant within the <code>DirectionsOptions</code> 
object when calling the <code>Directions.load()</code> method. The following travel 
modes are supported:</p>

<ul>
<li><code>DirectionsOptions.TRAVEL_MODE_DRIVING</code> indicates standard driving directions using the road network</li>
<li><code>DirectionsOptions.TRAVEL_MODE_WALKING</code> requests walking directions via pedestrian paths &amp; sidewalks 
(where available.)</li>
</ul>

<p><span style="color:red; ">Note:</span> Walking directions may sometimes not include clear 
pedestrian paths; as a result, requesting walking directions will initially display a warning message
box the first time such directions are retrieved.</p>

<h2 id="ReturningDirections">Handling Returned Directions</h2>

<p>Once directions are successfully returned, the <code>Directions</code> object will
store an encoded polyline representing the directions on the map, and a series of textual
directions within textual and HTML-formatted fields. The encoded polyline can be accessed
via the <code>Directions.encodedPolyline</code> property (and provided to other services
such as the <a href="#Elevation>">Elevation service</a>). To display the directions
on the map use <code>Directions.createPolyline()</code>.</p>

<pre class="prettyprint">

private function onMapReady(event:Event):void {
 
  // Create a directions object
  var dir:Directions = new Directions();
  dir.addEventListener(DirectionsEvent.DIRECTIONS_SUCCESS, onDirLoad);
  dir.addEventListener(DirectionsEvent.DIRECTIONS_FAILURE, onDirFail);
  dir.load("77 Massachusetts Avenue, Cambridge, MA to 4 Yawkey Way, Boston, MA 02215 (Fenway Park)");
}

private function onDirFail(event:DirectionsEvent):void {
  // Process failure, perhaps by showing an alert
}

private function onDirLoad(event:DirectionsEvent):void {
  var dir:Directions = event.directions;
                
  map.clearOverlays();
  map.addOverlay(dir.createPolyline());
}
</pre>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/DirectionsSimple.html">View example (DirectionsSimple.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/DirectionsSimple.mxml">
View Source (DirectionsSimple.mxml)</a></p>

<h2 id="Routes_and_Steps">Routes and Steps</h2>

<p>Textual and HTML-formatted directions are returned within a series of one or more <code>Route</code> objects,
each consisting of a segment specified in the original query. Each route in turn consists of one or more 
<code>Step</code> objects, which contain the turn-by-turn directions. You can retrieve the routes using the
<code>Directions.getRoute(i:Number)</code> method, where the passed number refers to the segment of the returned
directions. Steps within a route can be retrieved using the <code>Route.getStep(i:Number)</code> method.</p>

<p><code>Route</code> objects store the number of steps (of type 
<code>Step</code>) for that route, the starting and ending geocode 
for that route, and other computed information such as distance, duration, 
and exact lat/lon of the endpoint (which may be different than the ending 
geocode if the geocode does not lie on a road segment). Each <code>Step</code> 
object as well contains the description for that text (e.g. 
"Merge onto US-101 S via the ramp to San Jose") plus computed information 
including the distance, duration, and exact lat/lon.</p>

<p>You may use the textual information returned by the <code>Directions</code>
object to display turn-by-turn textual descriptions within any 
<code>DisplayObject</code>. In the following example, we display turn-by-turn
directions within an <code>&lt;mx:Text&gt;</code> object. The sample code below
shows how to extract route and step information from a <code>Directions</code>
object.</p>

<pre class="prettyprint">
private var map:Map;
private var dir:Directions;
private var turnCounter:uint = 0;

private function onMapReady(event:MapEvent):void {
  map.setCenter(new LatLng(41.651505,-72.094455), 8, MapType.NORMAL_MAP_TYPE);
  dir = new Directions();
  dir.addEventListener(DirectionsEvent.DIRECTIONS_SUCCESS, onDirLoad);
  dir.addEventListener(DirectionsEvent.DIRECTIONS_FAILURE, onDirFail);
}

private function onDirFail(event:DirectionsEvent):void {
  Alert.show("Status: " + event.directions.status);
  step.htmlText = "";
}

private function onDirLoad(event:DirectionsEvent):void {
  var dir:Directions = event.directions;       
  var startMarker:Marker;
  var endMarker:Marker;
        
  map.clearOverlays();
  map.addOverlay(dir.createPolyline());
  map.setZoom(map.getBoundsZoomLevel(dir.bounds));
  map.setCenter(dir.bounds.getCenter());
  
  startMarker = new Marker(dir.getRoute(0).startGeocode.point, new MarkerOptions({fillStyle: {color:Color.GREEN}}));
  endMarker = new Marker(dir.getRoute(0).endGeocode.point, new MarkerOptions({fillStyle: {color:Color.BLUE}}));
  map.addOverlay(startMarker);
  map.addOverlay(endMarker);
}

private function processTurnByTurn():void  {
  
  var stepText:String;
  var stepMarker:Marker;
  turnCounter++;
  
  if (turnCounter <= dir.getRoute(0).numSteps) {
    stepText = dir.getRoute(0).getStep(turnCounter-1).descriptionHtml;
    stepMarker = new Marker(dir.getRoute(0).getStep(turnCounter-1).latLng, new MarkerOptions({label: turnCounter.toString()}));
    map.addOverlay(stepMarker);
    step.htmlText = "Step " + turnCounter + ": " + stepText;  
  } else {
    getTurnByTurnDirections.enabled = false;
    step.htmlText = "Arrive at " + to.text + " : " + dir.getRoute(0).summaryHtml;
  }  
}
</pre>

<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/DirectionsAdvanced.html">View example (DirectionsAdvanced.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/DirectionsAdvanced.mxml">
View ActionScript code (DirectionsAdvanced.mxml)</a></p>

<p>For full documentation of the various objects, methods and events in the Directions API 
package, consult the <a href="reference.html">API Reference</a>.</p>

<h1 id="Elevation">Elevation</h1>

<p>The Elevation service provides elevation data for locations
on the surface of the earth, including depth locations on the
ocean floor (which return negative values). In those cases where
Google does not possess exact elevation measurements at the precise
location you request, the service will interpolate and return an
averaged value using the four nearest locations.</p>

<p>The <code>Elevation</code> object provides you with
a simple interface to query locations on the earth for elevation
data. Additionally, you may request sampled elevation data along
paths, allowing you to calculate the equidistant elevation changes
along routes. The <code>Elevation</code> object communicates
with the Google Maps API Elevation Service which receives elevation
requests and returns elevation data.</p>

<p>Note that these requests are rate-limited to discourage abuse of
the service. If instead you wish to calculate elevations for static,
known locations, see the
<a href="../elevation/index.html">Elevation API</a>
documentation.</p>

<p>With the Elevation service, you can develop hiking
applications, mobile positioning applications, or low resolution
surveying applications.</p>

<h2 id="ElevationRequests">Elevation Requests</h2>

<p>Accessing the Elevation service is asynchronous, since
the Google Maps API for Flash needs to make a call to an external
server. The <code>Elevation</code> class provides several methods
for requesting elevation for locations or along a path, but none
of these methods return a result. Instead, the Maps API for Flash
provides events which you can monitor upon completion of the
service request:</p>

<ul>
  <li><code>ElevationEvent.ELEVATION_FAILURE</code> indicates
  that the Elevation service could not process the request.
  Evaluate the event's <code>status</code> property for
  an indication of the failure's cause.</li>
  <li><code>ElevationEvent.ELEVATION_SUCCESS</code> indicates
  that the Elevation service successfully processed the request.
  The returned elevations are located within the event's
  <code>elevations</code> array.</li>
</ul>

<p>The following code illustrates how to set up these event
listeners:</p>

<pre class="prettyprint actionscript">
private var elevator:Elevation;

elevator.addEventListener(ElevationEvent.ELEVATION_SUCCESS, showElevation);
elevator.addEventListener(ElevationEvent.ELEVATION_FAILURE, onElevationFail);

private function onElevationFail(event:ElevationEvent):void {
  // Process failure, perhaps by showing an alert
}

private function showElevation(event:ElevationEvent):void {
  // Process elevation data
}
</pre>

<p>You may request elevation data in two ways:</p>

<ul>
  <li>Requests for separate, discrete locations using the
  <code>loadElevationForLocations()</code> method, which
  is passed a list of one or more <code>LatLng</code> objects.</li>
  <li>Requests for elevation on a series of connected points along
  a path using the <code>loadElevationAlongPath()</code> method,
  which is passed an ordered set of path vertices as a series
  of <code>LatLng</code> objects. When requesting elevations
  along paths, you must also pass a parameter indicating
  how many samples you wish to take along that path.</li>
</ul>

<p>Both methods dispatch a request to the Elevation service and
return <code>void</code>. Before invoking either of these methods,
you must set up an event listener for <code>ElevationEvent</code>s.</p>

<p><span style="color:red">Note: </span> The Maps API for Flash
also provides two convenience methods similar to the above methods
(<code>loadElevationForEncodedLocations()</code> and <code>loadElevationAlongEncodedPath()</code>) if you have a set of locations
within an <a href="../utilities/polylinealgorithm.html">
encoded polyline</a>, such as those returned from a Directions request. (See
<a href="#ReturningDirections">Handling Returned Directions</a>
for information on accessing this encoded polyline.)</p>

<h3 id="LocationElevationRequests">Location Elevation Requests</h3>

<p>To request elevation data for a single location, or a set of
discrete locations, call <code>loadElevationForLocations()</code>,
passing this method an array of <code>LatLng</code>s.</p>

<p>You may pass any number of multiple coordinates within an array,
as long as you don't exceed the service quotas. Note that when passing
multiple coordinates, the accuracy of any returned data may be of
lower resolution than when requesting data for a single coordinate.</p>

<h3 id="PathElevationRequests">Sampled Path Elevation Requests</h3>

<p>You may also request elevation data along a path using
<code>loadElevationAlongPath()</code>, passing a set of two
or more ordered <code>LatLng</code> objects that define a
<i>path</i> and a number specifying the number of sample
points along that path for which to return elevation data.</p>

<p>As with positional requests, the <code>path</code> parameter
specifies a set of latitude and longitude values. Unlike a positional
request, however, the <code>path</code> specifies an ordered set of
vertices. Rather than return elevation data at the vertices, path
requests are sampled <i>along the length of the path</i>, where each
sample is equidistant from each other (inclusive of the endpoints).</p>

<h2 id="ElevationResponses">Elevation Responses</h2>

<p>For each valid request, the Elevation service will return 
an <code>ElevationResponse</code> object within the
<code>ElevationEvent</code>'s <code>locations</code> property.
Additionally, the event will contain an
<code>ElevationStatus</code> object within the event's
<code>status</code> property.</p>

<h3 id="ElevationStatus">Elevation Statuses</h3>

<p>Each elevation event returns an <code>ElevationStatus</code> code
within its event properties. This <code>status</code> code
is of type <code>ServiceStatus</code>and generally contains
one of the following values:

<ul>
  <li><code>GEO_SUCCESS</code> indicating the service request was successful</li>
  <li><code>GEO_BAD_REQUEST</code> indicating the service request was malformed</li>
  <li><code>GEO_TOO_MANY_QUERIES</code> indicating that the requestor
  has exceeded quota</li>
  <li><code>GEO_REQUEST_DENIED</code> indicating the service did not complete 
  the request, likely because of an invalid parameter</li>
  <li><code>GEO_UNKNOWN_ERROR</code> indicating an unknown error</li>
</ul>

<p>You should check the event's status code when
listening for <code>ElevationEvent.ELEVATION_FAILURE</code>.</p> 

<h3 id="ElevationResults">Elevation Results</h3>

<p>Upon success, the <code>locations</code> argument of the
<code>ElevationEvent</code> will contain an array of
<code>ElevationResponse</code> objects.
These objects contain the following elements:</p>

<ul>
  <li>A <code>location</code> element (containing a <code>LatLng</code>
  object) of the position for which elevation data is being computed.
  Note that for path requests, the set of <code>location</code> elements
  will contain the sampled points along the path.</li>
  <li>An <code>elevation</code> element indicating the elevation of
  the location in meters.</li>
</ul>

<p>The following code translates a click on a map into an elevation
request using the <a href="#LocationElevationRequest">Location
Elevation Request</a>:</p>


<pre class="prettyprint lang-javascript">
import com.google.maps.MapMouseEvent;
import com.google.maps.LatLng;
import com.google.maps.MapEvent;
import com.google.maps.Map;
import com.google.maps.MapType;
import com.google.maps.InfoWindowOptions;
import com.google.maps.services.*;

private var elevator:Elevation;
private var denali:LatLng = new LatLng(63.333333, -150.5);

private function onMapReady(event:MapEvent):void {

  map.setCenter(denali, 8, MapType.PHYSICAL_MAP_TYPE);

  elevator = new Elevation();

  map.addEventListener(MapMouseEvent.CLICK, getElevation);

  elevator.addEventListener(ElevationEvent.ELEVATION_SUCCESS, showElevation);
  elevator.addEventListener(ElevationEvent.ELEVATION_FAILURE, onElevationFail); 
}

private function getElevation(event:MapMouseEvent):void {
  var locationArray:Array = new Array();
  locationArray[0] = event.latLng;

  elevator.loadElevationForLocations(locationArray);
}

private function onElevationFail(event:ElevationEvent):void {
  // Process failure, perhaps by showing an alert
}

private function showElevation(event:ElevationEvent):void {
  var elevationArray:Array = event.elevations;

  map.openInfoWindow(
    elevationArray[0].location,
    new InfoWindowOptions({
        content: "Elevation: " + elevationArray[0].elevation + " meters"}));
}
</pre>


<p><a href="http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/ElevationSimple.html">View example (ElevationSimple.html)</a></p>

<p><a href="http://code.google.com/p/gmaps-samples-flash/source/browse/trunk/samplecode/ElevationSimple.mxml">
View Source (ElevationSimple.mxml)</a></p>

        <!-- end body text -->

   
      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
    &copy;2010 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://code.google.com/terms.html">Terms of Service</a> -
    <a href="http://code.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://code.google.com/more">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="http://code.google.com/intl/en">English</a> -
    <a href="http://code.google.com/intl/es">Español</a> -
    <a href="http://code.google.com/intl/ja">日本語</a> -
    <a href="http://code.google.com/intl/ko">한국어</a> -
    <a href="http://code.google.com/intl/pt-BR">Português</a> -
    <a href="http://code.google.com/intl/ru">Pусский</a> -
    <a href="http://code.google.com/intl/zh-CN">中文(简体)</a> -
    <a href="http://code.google.com/intl/zh-TW">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="../../../../js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>

