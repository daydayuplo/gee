<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



 












  


  


<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/apis/maps/documentation/mapsdata/developers_guide_javascript.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Developer Guide: JavaScript - Google Maps Data API - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/apis/maps/documentation/mapsdata/_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="../../../../css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="../../../../js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../../../css/iehacks.css"><![endif]-->

  </head>

  <body class="gc-documentation">

    <div id="gb">
 <span>
  
    <a id="lang-dropdown" href="http://code.google.com" onclick="return false;"><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>

<div id="gc-container" class="depr">
<a id="top"></a>
<div id="skipto">
  
  
</div>

<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
  
     <img src="../images/code_logo.gif" height="40" width="167" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "adwords" or "open source"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->




</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google Maps Data API (<a href="http://googlegeodevelopers.blogspot.com/2010/11/maps-data-api-deprecation-announcement.html">Deprecated</a>)</h1>
  <ul id="Docs" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="index.html" title="Google Maps Data API home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="developers_guide.html" class="selected" title="Official Google Maps Data API documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../../faq.html" title="Answers to frequently asked questions about Google Maps Data API">FAQ</a>
    </li>
  
    <li>
      <a href="http://googlegeodevelopers.blogspot.com/" title="Official Google Maps Data API blog">Blog</a>
    </li>
  
    <li>
      <a href="forum.html" title="Google Maps Data API developer forum">Forum</a>
    </li>
  
    <li>
      <a href="terms.html" title="Google Maps Data API terms of service">Terms</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-170">

      <a name="gc-toc-anchor"></a>
      <div class="g-unit g-first" id="gc-toc">
          <ul>
    <li><a href="../../index.html">Maps API Family</a></li>
    <li><a href="http://code.google.com/apis/kml/documentation/kmlSearch.html">Index Your Maps Content</a></li>
  </ul>
  <ul>
      <li><h2>Maps Data API</h2>
        <p><span style="color:grey">(Deprecated API)</span></p>
        <ul>
          <li><a href="index.html">Home Page</a></li>
          <li><a class="tlw-expanded" href="developers_guide.html">Developer's Guide</a>
            <ul>
              <li><a href="developers_guide_protocol.html">HTTP Protocol Guide</a>
              <li><a href="developers_guide_java.html">Java Developer's Guide</a></li>
              <li><a href="developers_guide_javascript.html">JavaScript Developer's Guide</a></li>
            </ul>
          <li><a href="reference.html">HTTP Reference</a></li>
          <li><a href="libraries.html">Client Libraries</a></li>
          <li><a href="examples.html">Examples</a></li>
          <li><a href="http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype:MapsData&colspec=ID+Type+Status+Introduced+Fixed+Summary+Internal+Stars&cells=tiles">Known Issues</a></li>
        </ul>
        <div class="line"></div>
        <ul>
          <li><h2>GData APIs</h2>
            <ul>
              <li><a href="http://code.google.com/apis/gdata/overview.html">Overview</a></li>
              <li><a href="http://code.google.com/apis/gdata/auth.html">Authentication</a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>   
      <div class="line"></div>
      <ul>
        <li><h2>Maps JavaScript API V3</h2>
         <ul>
           <li><a href="../javascript/index.html">Home Page</a></li>
           <li><a href="../javascript/basics.html">Documentation</a></li>
         </ul>
       </li>
      </ul>
      <ul>
        <li><h2>Maps Javascript API V2</h2>
         <p><span style="color:grey">(Deprecated API)</span></p>
         <ul>
           <li><a href="../javascript/v2/index.html">Home Page</a></li>
           <li><a href="../javascript/v2/basics.html">Documentation</a></li>
         </ul>
       </li>
      </ul>
        <div class="line"></div>
    <ul>
      <li><h2>Maps API for Flash</h2>
        <ul>
          <li><a href="../flash/index.html">Home Page</a></li>
          <li><a href="../flash/intro.html">Documentation</a></li>
        </ul>
      </li>
    </ul>
    <div class="line"></div>
    <ul>
        <li><h2><a href="../webservices/index.html">Maps API Web Services</a></h2>
        <ul>
          <li><a href="../geocoding/index.html">Geocoding API</a></li>
          <li><a href="../directions/index.html">Directions API</a></li>
          <li><a href="../elevation/index.html">Elevation API</a></li>
          <li><a href="../places/index.html">Places APl</a></li>
        </ul>
      </li>
    </ul>
       <div class="line"></div>
        <ul>
          <li><h2>Static Maps API</h2>
            <ul>
              <li><a href="../staticmaps/index.html">Developer Guide</a></li>
            </ul>
          </li>
        </ul>
    <div class="line"></div>
        <ul>
          <li><h2>Earth API</h2>
            <ul>
              <li><a href="http://code.google.com/apis/earth">Home Page</a></li>
              <li><a href="http://code.google.com/apis/earth/documentation">Documentation</a></li>
            </ul>
          </li>
        </ul>
      <div class="line"></div>
        <ul>
          <li><h2>Local Search API</h2>
            <p><span style="color:grey">(Deprecated API)</span></p>
            <ul>
              <li>
                <a href="../localsearch/index.html">Home Page</a>
              </li>
              <li>
                <a href="../localsearch/start.html">Documentation</a>
              </li>
            </ul>
          </li>
        </ul>
    <div class="line"></div>
          <div class="promo"><p><a href="../premier/index.html">Google Maps API Premier</a></p><p>Includes enterprise licensing and support</p></div>

      </div>

      <a name="gc-pagecontent-anchor"></a>
      <div class="g-unit" id="gc-pagecontent">
        <h1 class="page_title">Developer Guide: JavaScript</h1>



<p>The Maps Data API allows client applications to view and update maps and map
  features through the use of Google Data API feeds. These feeds are provided as
  URLs using the popular
  <a href="http://en.wikipedia.org/wiki/Atom_(standard)">Atom standard</a>.
  You programmatically create, alter and delete data using HTTP requests. The
  JavaScript client library sits on top of this HTTP protocol and enables API
  interactions using JavaScript methods.
</p>
<p>Maps and map features are stored on Google's servers. A web interface to a
  user's maps is available through Google My Maps at
  <a href="http://maps.google.com/maps/mm">http://maps.google.com/maps/mm</a>.
</p>
<p>Client libraries for other programming languages are also available, and are
  listed in the
  <a href="developers_guide.html">Developer's
  Guide introduction</a>. If you're interested in understanding more about the
  underlying protocol that these libraries use, see the
  <a href="developers_guide_protocol.html">HTTP Protocol Guide</a>.
</p>

<h2>Contents</h2>
<div class="toc">
  <ol>
    <li><a href="#audience">Audience</a></li>
    <li><a href="#getting_started">Getting Started</a>
      <ol>
        <li>
          <a href="#creating_a_maps_data_api_account">Creating a Maps Data API
            Account</a>
        </li>
        <li>
          <a href="#loading_the_google_maps_data_api">Loading the Google Maps
            Data API</a>
        </li>
        <li>
          <a href="#creating_the_mapsservice_object">Creating the MapsService
            Object</a>
        </li>
      </ol>
    </li>
    <li>
      <a href="#authenticating_to_the_maps_data_api_service">Authenticating to
        the Maps Data API Service</a>
      <ol>
        <li><a href="#authenticating_in_a_web_client_with_authsub">
          Authenticating in a Web Client with AuthSub</a></li>
        <li><a href="#authenticating_in_a_gadget_with_the_oauth_proxy">
          Authenticating in a Gadget with the OAuth Proxy</a></li>

      </ol>
    </li>
    <li>
      <a href="#overview_maps_and_features">Overview: Maps and Features</a>
    </li>
    <li><a href="#maps">Maps</a>
      <ol>
      <li>
        <a href="#retrieving_a_list_of_maps">Retrieving a List of Maps</a>
      </li>
      <li><a href="#retrieving_a_map">Retrieving a Map</a></li>
      <li><a href="#creating_a_map">Creating a Map</a></li>
      <li><a href="#updating_a_map">Updating a Map</a></li>
      <li><a href="#deleting_a_map">Deleting a Map</a></li>
      </ol>
    </li>
    <li><a href="#features">Features</a>
       <ol>
         <li><a href="#retrieving_a_list_of_features">Retrieving a List of
           Features</a></li>
         <li><a href="#retrieving_a_feature">Retrieving a Feature</a></li>
         <li><a href="#creating_a_feature">Creating a Feature</a></li>
         <li><a href="#updating_a_feature">Updating a Feature</a></li>
         <li><a href="#deleting_a_feature">Deleting a Feature</a></li>
       </ol>
    </li>
    <li><a href="#controlling_access_to_maps">Controlling Access to Maps</a>
      <ol>
        <li><a href="#the_api_visible_custom_property">The <code>api_visible</code>
          Custom Property</a></li>
        <li><a href="#access_control_lists">Access Control Lists</a></li>
      </ol>
    </li>
    <li><a href="#debugging">Debugging</a></li>
    <li><a href="#more_resources">More Resources</a></li>
  </ol>
</div>

<h1 id="audience">Audience</h1>
<p>This document is intended for JavaScript programmers who wish to interact
  with the Google Maps Data API to create, update, or delete maps and map
  features.</p>
<p>For reference information about the classes and methods provided by the
  client library,  see the
  <a href="http://code.google.com/apis/gdata/jsdoc">JSDoc</a>. For general
  Maps Data API reference information, see the
  <a href="reference.html">HTTP Protocol
  Reference</a>.</p>

<h1 id="getting_started">Getting Started</h1>
<p>Using the Maps Data API JavaScript client library requires the following:</p>
<ul>
  <li>A <a href="https://www.google.com/accounts">Google Account</a>, used for
    associating your data</li>
  <li>A JavaScript-enabled browser</li>
</ul>
<p>We also recommend a JavaScript <a href="#debugging">debugger</a>.</p>

<h2 id="creating_a_maps_data_api_account">Creating a Maps Data API Account</h2>
<p>Maps are stored and associated with user IDs attached to a Google Account. If
  you do not currently have a Google Account,
  <a href="https://www.google.com/accounts/NewAccount">sign up for one here</a>.
</p>

<p>The Maps Data API manipulates maps which appear within the My Maps feature
on Google Maps. My Maps includes two types of maps:
<b>Public</b>, and <b>Unlisted</b>. A sample My Map is shown below:</p>

<p>
  <img src="images/mymaps_screenshot.jpg"
    id="figure1" width="600px" height="400px"
    title="Google My Maps browser interface"/>
  <br />
  <em>Figure 1: Google My Maps interface</em></p>

<p>You can use <a href="http://maps.google.com/maps/mm">My Maps</a> within your
  browser to inspect the state of your map after data updates.</p>
<p>Maps created with the Maps Data API are created as <strong>Public</strong>
  maps, meaning they will be indexed and may show up in search results. To
  change your maps to <strong>Unlisted</strong> mode, you must edit them through
  the My Maps web UI.</p>

<h2 id="loading_the_google_maps_data_api">Loading the Google Maps Data API</h2>
<p>Before your client can use the client library, the client has to request the
  client library code from the server. There are two ways of requesting the
  client library:</p>
<ul>
  <li><a href="#using_the_common_loader">Using the Google common loader</a></li>
  <li><a href="#using_the_autoloader">Using the Autoloader</a></li>
</ul>

<h3 id="using_the_common_loader">Using the Common Loader
  (<code>google.load()</code>)</h3>
<p>Google's JavaScript client libraries for AJAX APIs can  be loaded using a
  common loader function, named <code>google.load()</code>. This function is
  contained within the <code>jsapi</code> JavaScript file, which you must
  reference from your document's <code>&lt;head&gt;</code>:</p>
<pre class="prettyprint lang-js">
&lt;script type=&quot;text/javascript&quot; src=&quot;http://www.google.com/jsapi&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;

  // Load the latest version of the Google Data JavaScript Client
  google.load('gdata', '2.x'<span class="prettyprint">, {packages: ['maps']});</span>

  function onGoogleDataLoad() {
    // Put your code here
  }

  // Call function once the client has loaded
  google.setOnLoadCallback(onGoogleDataLoad);

&lt;/script&gt;</pre>

<p><code>google.load</code> is passed three parameters:</p>
<ul>
  <li>A string identifying the module to load. For the Maps Data API, this is
    <code>'gdata'</code>.</li>
  <li>The version of the module to use:
    <ul>
      <li><code>&quot;2&quot;</code> is the second-to-last revision of major
        version 2.</li>
      <li><code>&quot;2.x&quot;</code> is the latest revision of major version
        2.</li>
      <li><code>&quot;2.s&quot;</code> is the latest <em>stable</em> revision of
        major version 2.  We will occasionally declare a certain version of the
        client library to be &quot;stable,&quot; based on feedback we receive
        from developers. However, that version may not have the latest features.
      </li>
      <li><code>&quot;2.0&quot;</code>, <code>&quot;1.1&quot;</code>, etc are
        specific versions of the library, with a specified major and minor
        revision number.</li>
    </ul>
  </li>
  <li>A string indicating the desired <code>gdata</code> package(s). For the
    Maps Data API, the value is <code>'maps'</code>. This parameter is optional,
    but is recommended, as it reduces the size of the JavaScript client by
    loading only the required packages.</li>
</ul>
<p><code>google.setOnLoadCallback()</code> is called once the Google Data
  JavaScript client library has been fully loaded. This ensures that the browser
  doesn't attempt to execute your code before the library is available. Your
  client code must be placed inside the <code>onGoogleDataLoad()</code>
  function.</p>

<p>For more information on the common loading mechanism, refer to the
  <a href="http://code.google.com/apis/gdata/client-js.html#Acquire_Library">Loading the library</a>
  section of <strong>Using the JavaScript Client Library</strong>.</p>

<h3 id="using_the_autoloader">Using the Autoloader</h3>
<p>The <code>gdata</code> client library can
  also be loaded directly from the Google AJAX API loader without using
  <code>google.load</code>. To do so, add the following tag (removing the
  linebreaks) to your document's <code>&lt;head&gt;</code>:</p>

<pre class="prettyprint">&lt;script type=&quot;text/javascript&quot; src=&quot;http://www.google.com/jsapi?autoload=
%7B%22modules%22%3A%5B%7B%22name%22%3A%22gdata%22%2C%22version%22%3A%222.x
%22%2C%5B%22callback%22%3A%22onLoad%22%2C%22packages%22%3A%5B%22maps%22%5D
%5D%7D%5D%7D&quot;&gt;&lt;/script&gt;</pre>

<p>The <code>onLoad</code> value in the string above
  defines the callback function to invoke once the API is loaded. Place your
  client code within the <code>onLoad()</code> function to ensure that the
  client library is fully loaded before you attempt to create a new
  <code>MapsService</code> object. More information about autoloading is
  available from the <strong>Autoloading</strong> section of the
  <a href="http://code.google.com/apis/ajax/documentation/#AutoLoading">AJAX APIs documentation</a>.
</p>

<h2 id="creating_the_mapsservice_object">Creating the MapsService Object</h2>
<p>The <code>google.gdata.maps.MapsService</code> class
  (<a href="http://code.google.com/apis/gdata/jsdoc/1.10/google/gdata/maps/MapsService.html">reference</a>)
  contains the methods necessary for accessing features and maps in the Google
  Data API. This class also inherits authentication methods necessary for
  <a href="#authenticating_in_a_gadget_with_the_oauth_proxy">OAuth Proxy</a>
  authentication for Google Data API gadgets.</p>

<p>To create a <code>MapsService</code> object:</p>

<pre class="prettprint lang-js">var service = new google.gdata.maps.MapsService('docs-example');</pre>
<p>where <code>docs-example</code> is the application's name. The application
  name is used only as an identifier.</p>
<p class="warning">To simplify the code samples included in this document,
  the <code>MapsService</code> object is assumed to have been declared as a
  global variable, <code>service</code>.</p>

<h1 id="authenticating_to_the_maps_data_api_service">
  Authenticating to the Maps Data API Service</h1>
<p>Conceptual information about authentication is covered within the
<a href="developers_guide_protocol.html#Authenticating">
HTTP Protocol Guide</a>. </p>

<h2 id="authenticating_in_a_web_client_with_authsub">Authenticating in a Web
  Client with AuthSub</h2>

<p>Authentication for a web-based JavaScript client is accomplished through
  <a href="http://code.google.com/apis/gdata/authsub-js.html"> AuthSub for JavaScript</a>. This
  authentication scheme generates a token that your client application uses to
  authenticate for each API call.</p>
<p>A simple login function could look like this:</p>
<pre class="prettyprint lang-js">function doLogin() {
   var token = google.accounts.user.login('http://maps.google.com/maps/feeds');
}</pre>
<p>Calling this function directs the user to a Google-hosted login page, where
   they are given the choice to allow or disallow access to their account from
   your application. If access is granted, they are  directed back to the URL
   from which the login function was called.</p>
<p>Some additional authentication-related functions:</p>
<pre class="prettyprint lang-js">
// Check whether the user is authenticated.
function checkLogin() {
   return google.accounts.user.checkLogin('http://maps.google.com/maps/feeds');
}
</pre>
<pre class="prettyprint lang-js">
// Log the user out.
function doLogout() {
   google.accounts.user.logout();
}

// Optionally, include a callback parameter that
// gets called once the user is logged out.
function doLogoutAndRefresh() {
  google.accounts.user.logout(function() {
    window.location.reload();
  });
}
</pre>

<h2 id="authenticating_in_a_gadget_with_the_oauth_proxy">Authenticating in a
  Gadget with the OAuth Proxy</h2>

<p>The Google Maps Data API JavaScript client also supports authentication
  using the OAuth Proxy scheme, for use in
  <a href="http://code.google.com/apis/gdata/articles/gdata_gadgets.html">Google Data API gadgets</a>.
</p>
<p>First, add an <code>&lt;OAuth&gt;</code> element to your gadget's
  <code>&lt;ModulePrefs&gt;</code> section:</p>

<pre class="prettyprint">
&lt;ModulePrefs&gt;
...
&lt;OAuth&gt;
  &lt;Service name=&quot;google&quot;&gt;
    &lt;Access url=&quot;https://www.google.com/accounts/OAuthGetAccessToken&quot; method=&quot;GET&quot; /&gt;
    &lt;Request url=&quot;https://www.google.com/accounts/OAuthGetRequestToken?
                  scope=http://maps.google.com/maps/feeds/&quot; method=&quot;GET&quot; /&gt;
    &lt;Authorization url=&quot;https://www.google.com/accounts/OAuthAuthorizeToken?
                        oauth_callback=http://oauth.gmodules.com/gadgets/oauthcallback&quot; /&gt;
  &lt;/Service&gt;
&lt;/OAuth&gt;
...
&lt;/ModulePrefs&gt;
</pre>

<p>Then, call the <code>useOAuth()</code> method on the <code>MapsService</code>
  object:</p>

<pre class="prettyprint lang-js">
var service = new google.gdata.maps.MapsService('docs-example');
service.useOAuth('google');</pre>

<p>More information about using the OAuth Proxy in gadgets is available from
  <a href="http://code.google.com/apis/gadgets/docs/oauth.html">Writing OAuth Gadgets</a>.</p>



<h1 id="overview_maps_and_features">Overview: Maps and Features</h1>
<p>The Google Maps Data API works with the concepts of <em>maps</em> and
  <em>features</em>.</p>
<p><strong>Maps</strong> are  containers for any number of features. A map has
  attributes that include a title, author, and the time this map was last
  updated, but does not include any geographic information or placemarks.</p>
<p><strong>Features</strong> are objects on a map. A feature is associated with
  only one map, and is defined using KML. A feature is a
  <a href="http://code.google.com/apis/kml/documentation/kmlreference.html#placemark">
    KML placemark</a>
  element and can contain geographic information, descriptive information (such
  as a title, icon, and description balloon contents), and associated geometry,
  such as lines or polygons.</p>
<p>
  <img src="images/placemark_examples.jpg"
    width="500" height="320" id="figure2" title="Examples of feature types" />
  <br />
  <em>Figure 2: Four  features on a map</em>
</p>
<p>When using the Google Maps Data API:</p>
<ul>
  <li>You can request a feed of a user's maps.</li>
  <li>You can specify a specific map within that feed.</li>
  <li>You can request a feed of features contained within a specific map.</li>
  <li>You can specify a specific feature of a specific map.</li>
</ul>
<p>You cannot request a feed of all features across all maps.</p>

<h1 id="maps">Maps</h1>
<p>The Google Maps Data API can return a list of a user's maps as a feed object,
   or individual maps can be retrieved if their URL is known.</p>

<h2 id="retrieving_a_list_of_maps">Retrieving a List of Maps</h2>
<p>When retrieving a list of maps, a feed URL must be specified. The feed URL
  specified which set of the user's maps to return:</p>
<ul>
  <li><code>http://maps.google.com/maps/feeds/maps/default/owned</code>
    returns all maps created by the user</li>
  <li><code>http://maps.google.com/maps/feeds/maps/default/public</code>
    returns all public maps created by the user</li>
  <li><code>http://maps.google.com/maps/feeds/maps/default/unlisted</code>
    returns all unlisted maps created by the user</li>
</ul>
<p>Map feeds are requested by calling <code>getMapFeed()</code> on the
  <code>MapsService</code> object. <code>getMapFeed()</code> takes as
  parameters:</p>
<ul>
   <li>a feed URL, as listed above</li>
   <li>a function to be called when the feed is returned</li>
   <li>an error handler</li>
</ul>
<p>Upon success, <code>getMapFeed()</code> passes a feed object to the
  continuation function. The list of maps can be accessed from the feed object's
  <code>feed</code> parameter:</p>

<pre class="prettyprint lang-js">
function listMaps() {
  var list = document.createElement('ul');
  var mapFeedUrl = 'http://maps.google.com/maps/feeds/maps/default/owned';

  service.getMapFeed(mapFeedUrl, function(feedRoot) {
    var feed = feedRoot.feed;
    var entries = feed.getEntries();
    for (var i = 0; i &lt; entries.length; i++) {
      var entry = entries[i];
      var mapTitle = entry.getTitle().getText();
      var listItem = document.createElement('li');
      var listText = document.createTextNode(mapTitle);
      listItem.appendChild(listText);
      list.appendChild(listItem);
    }
    document.body.appendChild(list);
  }, errorHandler);
}
</pre>

<h2 id="retrieving_a_map">Retrieving a Map</h2>
<p>If a map's URL is known, it can be requested directly by calling
  <code>getMapEntry()</code> on the <code>MapsService</code> object. A single
  map's URL has the following structure:</p>
<p>
  <code>
    http://maps.google.com/maps/feeds/maps/<em>userID</em>/full/<em>mapID</em>
  </code>
</p>
<p>The  URL of a specific map can be obtained from a feed of all maps by calling
  <code>getSelfLink().getHref()</code> on an entry:</p>

<pre class="prettyprint lang-js">
var mapFeedUrl = 'http://maps.google.com/maps/feeds/maps/default/owned';
var mapUrl;

service.getMapFeed(mapFeedUrl, function(feedRoot) {
  var feed = feedRoot.feed;
  var entries = feed.getEntries();
  for (var i = 0; i &lt; entries.length; i++) {
    var entry = entries[i];
    if (entry.getTitle().getText() == &quot;Roadtrip 2009&quot;) {
      mapUrl = entry.getSelfLink().getHref();
    }
  }
}, errorHandler);</pre>

<p>To store all individual map URLs for later access:</p>
<pre class="prettyprint lang-js">// Create an array to hold individual map URLs.
var mapUrls = [];

var mapFeedUrl = 'http://maps.google.com/maps/feeds/maps/default/owned';
service.getMapFeed(mapFeedUrl, function(feedRoot) {
  var feed = feedRoot.feed;
  var entries = feed.getEntries();
  for (var i = 0; i &lt; entries.length; i++) {
    var entry = entries[i];
    mapUrls[i] = entry.getSelfLink().getHref();
  }
}, errorHandler);
</pre>

<p>Note that the <code>MapEntry</code> object returned by the
  <code>getMapEntry()</code> method is identical to that returned within a
  <code>getMapFeed()</code> feed.</p>
<p>The following example retrieves a map entry and prints its title as an
  <code>h1</code> element on the page.</p>

<pre class="prettyprint lang-js">
service.getMapEntry(mapUrl, function(entryRoot) {
  var entry = entryRoot.entry;
  var mapTitle = entry.getTitle().getText();

  var titleElement = document.createElement('h1');
  var titleText = document.createTextNode(mapTitle);
  titleElement.appendChild(titleText);
  document.body.appendChild(titleElement);
}, errorHandler);
</pre>

<h2 id="creating_a_map">Creating a Map</h2>
<p>To create a new map, call <code>insertEntry()</code> on the map feed. A title
  and a summary must be specified; all other properties are optional. The
  example below creates a new map with the title 'Roadtrip 2009' and inserts it
  into the user's feed.</p>

<p><code>insertEntry()</code> takes three parameters:</p>
<ul>
   <li>a <code>google.gdata.maps.MapEntry</code> object</li>
   <li>a function to be called once the map has been created</li>
   <li>an error handler</li>
</ul>
<pre class="prettyprint lang-js">
function addMap() {

  var mapFeedUrl = 'http://maps.google.com/maps/feeds/maps/default/owned';
  service.getMapFeed(mapFeedUrl, function(feedRoot){
    var newMap = new google.gdata.maps.MapEntry();
    newMap.setTitle(new google.gdata.atom.Text.create('Roadtrip 2009'));
    newMap.setSummary(new google.gdata.atom.Text.create('Seattle to San Francisco, and back'));

    feedRoot.feed.insertEntry(newMap, function() {window.location.reload();}, errorHandler);
  }, errorHandler);
}
</pre>

<h2 id="updating_a_map">Updating a Map</h2>
<p>A map's fields can be updated by calling <code>updateEntry()</code> on the map
  object. <code>updateEntry()</code>
   must be passed a function to be called upon successful update, and a function
   to be called if the update is unsuccessful.</p>
<pre class="prettyprint lang-js">
function updateMap() {

  service.getMapEntry(mapUrl, function(entryRoot) {
    var entry = entryRoot.entry;
    var newTitle = new google.gdata.atom.Text();
    newTitle.setText('An updated title');
    entry.setTitle(newTitle);
    entry.updateEntry(loadMaps, errorHandler);
  }, errorHandler);
}</pre>

<h2 id="deleting_a_map">Deleting a Map</h2>
<p>To delete a map, call <code>deleteEntry()</code> on the
  <code>MapsService</code>. Provide the URL of the map to be deleted, a function
  to be called when the deletion has succeeded, and a function to call if the
  deletion is not successful.</p>

<pre class="prettyprint lang-js">
function deleteMap(i) {

  var mapUrl = mapLinks[i];
  service.deleteEntry(mapUrl, function() {
    document.getElementById('app_status').innerHTML = 'Map deleted';
  }, errorHandler);
}</pre>

<p class="caution"><strong>Caution</strong>: Deleting a map also deletes all
  features associated with that map. There is no way to retrieve a  map or its
  features once the map has been deleted.</p>

<h1 id="features">Features</h1>
<p>Features are the objects that appear on a map. Each feature within the Maps
  Data API is defined by a single KML <code>&lt;Placemark&gt;</code> element;
  the Placemark must contain a <code>name</code> element and one of the
  following elements:</p>
<ul>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#point">
    &lt;Point&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#linestring">
    &lt;LineString&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#polygon">
    &lt;Polygon&gt;</a></code></li>
</ul>
<p>The following KML elements are supported and are optional:</p>
<ul>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#coordinates">
    &lt;coordinates&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#description">
    &lt;description&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#fill">
    &lt;fill&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#iconstyle">
    &lt;IconStyle&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#linearring">
    &lt;LinearRing&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#linestyle">
    &lt;LineStyle&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#outerboundaryis">
    &lt;outerBoundaryIs&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#outline">
    &lt;outline&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#width">
    &lt;width&gt;</a></code></li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#href">
    &lt;href&gt;</a></code> (within <code>&lt;IconStyle&gt;</code>)</li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#color">
    &lt;color&gt;</a></code> (as <code>#AABBGGRR</code>)</li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#icon">
    &lt;Icon&gt;</a></code> (within <code>&lt;IconStyle&gt;</code>)</li>
  <li><code><a href="http://code.google.com/apis/kml/documentation/kmlreference.html#style">
    &lt;Style&gt;</a></code></li>
</ul>
<p>All other KML elements are silently removed when the KML is uploaded.</p>

<h2 id="retrieving_a_list_of_features">Retrieving a List of Features</h2>
<p>Each map contains a list of zero or more features: the placemarks, lines, and
  shapes placed on the map. To retrieve the feed of a map's features, you must
  pass the feed URL to the <code>getFeatureFeed</code>() method on the
  <code>MapsService</code> object.</p>
<p>To obtain the URL of a map's feature feed, call
  <code>getContent().getUri()</code> on a map entry:</p>

<pre class="prettyprint lang-js">var featureFeedUrl;
service.getMapEntry(mapUrl, function(entryRoot) {
  var entry = entryRoot.entry;
  featureFeedUrl = entry.getContent().getUri();
}, errorHandler);</pre>

<p>With this information, you can retrieve a full list of features:</p>

<pre class="prettyprint lang-js">
service.getFeatureFeed(featureFeedUrl, function(feedRoot) {

  var feed = feedRoot.feed;
  var features = feed.getEntries();

  // Create an unordered list to hold
  // the features' titles and contents.
  var ul = document.createElement('ul');

  for (var i = 0; i < features.length; i++) {

    var feature = features[i];
    var title = feature.getTitle().getText();
    var content = feature.getContent().getText();

    // Create a list item; add the title.
    var li = document.createElement('li');
    var titleNode = document.createTextNode(title);
    li.appendChild(titleNode);

    // Create a pre element; populate with content.
    // Append the pre to the list item.
    var pre = document.createElement('pre');
    var contentNode = document.createTextNode(content);
    pre.appendChild(contentNode);
    li.appendChild(pre);

    // Add the list item to the unordered list.
    ul.appendChild(li);
  }
  // Add the unordered list to the document body.
  document.body.appendChild(ul);
}, errorHandler);
</pre>

<h2 id="retrieving_a_feature">Retrieving a Feature</h2>

<p>Individual features can be retrieved with their identifying URLs. The URL can
  be obtained from a map's feature feed by calling
  <code>getSelfLink().getHref()</code> on the feature entry:</p>

<pre class="prettyprint lang-js">
var featureUrl;
service.getFeatureFeed(featureFeedUrl, function(feedRoot) {
  var feed = feedRoot.feed;
  var entries = feed.getEntries();

  for (var i = 0; i &lt; entries.length; i++) {
    var entry = entries[i];
    if (entry.getTitle().getText() == &quot;A fine feature&quot;) {
      featureUrl = entry.getSelfLink().getHref();
    }
  }
}, errorHandler);</pre>

<p>Once a feature's URL is known, call <code>getFeatureEntry()</code> on the
  <code>MapsService</code> object.  <code>getFeatureEntry()</code> takes three
  parameters:</p>
<ul>
  <li>the URL of the feature to retrieve</li>
  <li>a function to call upon success, and </li>
  <li>a function to call if the retrieval is unsuccessful.</li>
</ul>

<pre class="prettyprint lang-js">
service.getFeatureEntry(featureUrl, function(featureRoot) {
  var entry = featureRoot.entry;
  var title = entry.getTitle().getText();
  var content = entry.getContent().getText();
}, errorHandler);</pre>

<h2 id="creating_a_feature">Creating a Feature</h2>
<p>Features are created by passing a <code>FeatureEntry</code> object to
  <code>insertEntry()</code> on the feature feed. To create the entry:</p>
<ul>
  <li>Create a new <code>google.gdata.maps.FeatureEntry</code> object.</li>
  <li>Pass the feature's title to <code>setTitle()</code> on the
    <code>FeatureEntry</code> object.</li>
  <li>Create a new <code>google.gdata.maps.KmlContent</code> object.</li>
  <li>Pass the feature's KML as a string to <code>setText()</code> on the
    <code>KmlContent</code> object.</li>
  <li>Call <code>setType()</code> on the <code>KmlContent</code> object,
    specifying <code>TYPE_APPLICATION_VND_GOOGLE_EARTH_KML_XML</code>.</li>
  <li>Set the <code>KmlContent</code> object as the feature entry's content
    using <code>setContent()</code>.</li>
</ul>
<p>An example is shown below:</p>
<pre class="prettyprint lang-js">
service.getFeatureFeed(featureFeedUrl, function(feedRoot) {
  var newFeature = new google.gdata.maps.FeatureEntry();

  // Set the name for this feature.
  var title = new google.gdata.atom.Text();
  title.setText('A new feature');
  newFeature.setTitle(title);

  // Define the content.
  var kmlContent = new google.gdata.maps.KmlContent();
  var kmlString = '&lt;Placemark&gt;'
              +   '&lt;Point&gt;'
              +     '&lt;coordinates&gt;-122.448425,37.802907,0&lt;/coordinates&gt;'
              +   '&lt;/Point&gt;'
              + '&lt;/Placemark&gt;';
  kmlContent.setText(kmlString);
  kmlContent.setType(google.gdata.maps.KmlContent.TYPE_APPLICATION_VND_GOOGLE_EARTH_KML_XML);

  // Set the KML as the new feature's content.
  newFeature.setContent(kmlContent);

  // Insert the new feature into the feature feed.
  feedRoot.feed.insertEntry(newFeature, function () {window.location.reload();}, errorHandler);
}, errorHandler);
</pre>

<h2 id="updating_a_feature">Updating a Feature</h2>
<p>A feature can be updated by calling <code>updateEntry()</code> on the feature
  entry after the object has been updated. <code>updateEntry()</code>
  takes a function to call upon successful update, and a function to be called
  if the update fails.</p>
<h3>Updating the <code>&lt;name&gt;</code> Element</h3>
<p>A feature's name, or title, is defined by its <code>&lt;name&gt;</code>
  element in KML. However, in the Maps Data API JavaScript client, the
  <code>FeatureEntry</code> uses the entry's <code>title</code> field instead.
  Updates to the <code>&lt;name&gt;</code> element in the KML will be silently
  ignored.</p>

<pre class="prettyprint lang-js">service.getFeatureEntry(featureLink, function(featureRoot) {
  var entry = featureRoot.entry;
  var name = new google.gdata.atom.Text();
  name = 'Roadtrip 2009, updated';
  entry.setTitle(name);
  entry.updateEntry(function() {window.location.reload()}, errorHandler);
}, errorHandler);</pre>

<h3>Updating Other Elements</h3>
<p>All elements other than <code>&lt;name&gt;</code> must be updated by editing
  the feature's KML.</p>
<p>To pass KML to the entry:</p>
<ul>
  <li>Create a new <code>google.gdata.maps.KmlContent</code> object.</li>
  <li>Pass the KML as a string to <code>setText()</code>.</li>
  <li>Call <code>setType()</code> on the object, specifying
    <code>TYPE_APPLICATION_VND_GOOGLE_EARTH_KML_XML</code>.</li>
  <li>Set the <code>KmlContent</code> object as the feature entry's
    <code>content</code>.</li>
</ul>

<h3>Example</h3>
<p>The following example uses the content of a form (whose <code>textarea</code>
  element has the name <code>formInput</code>) to update a feature entry.</p>

<pre class="prettyprint lang-js">function updateKml(form, featureLink) {
  service.getFeatureEntry(featureLink, function(featureRoot) {
    var entry = featureRoot.entry;

    var kmlContent = new google.gdata.maps.KmlContent();
    var updatedKml = form.formInput.value;
    kmlContent.setText(updatedKml);
    kmlContent.setType(google.gdata.maps.KmlContent.TYPE_APPLICATION_VND_GOOGLE_EARTH_KML_XML);

    entry.setContent(kmlContent);
    entry.updateEntry(function() {window.location.reload()}, errorHandler);
  }, errorHandler);
}</pre>

<h2 id="deleting_a_feature">Deleting a Feature</h2>
<p>To delete a feature, call <code>deleteEntry()</code> on the feature entry,
  passing a function to be called upon successful deletion of the feature, and a
  function to be called if the deletion is unsuccessful.</p>
<pre class="prettyprint lang-js">
service.getFeatureEntry(featureLink, function(featureRoot) {
  var entry = featureRoot.entry;
  entry.deleteEntry(function() {
    document.getElementById('app_status').innerHTML = 'Feature deleted';
  }, errorHandler);
}, errorHandler);</pre>
<p class="caution"><strong>Caution</strong>: There is no way to retrieve a
  feature once it has been deleted.</p>

<h1 id="controlling_access_to_maps">Controlling Access to Maps</h1>

<p>Controlling access to your maps is important: sometimes you need to
  keep your data restricted to a small set of people, and other times you'd like
  your map to be accessible to the entire world. The Maps Data API provides two
  layers of access control:</p>

<ul>
  <li>
    The <a href="#the_api_visible_property"><code>api_visible</code> custom
    property</a> defines whether a map can be accessed by non-owners through the Maps Data API.
  </li>
  <li>
    <a href="#access_control_lists">Access control lists</a> define the type
    of access for each user of your map, from read+write, to read-only
    or write-only, to no access at all.
  </li>
</ul>

<p>Using these two layers of control, you can make sure that the correct people
  have access to your maps.</p>

<h2 id="the_api_visible_custom_property">The <code>api_visible</code> Custom Property</h2>

<p>Maps are always accessible to their owners through the API.</p>
<p>If you'd like your map to be accessible to others through the API (such as
  with a web application you create), the map's <code>api_visible</code> custom
  property must be <strong>true</strong>. The map's
  <a href="#access_control_lists">access control list</a> then defines access
  levels for non-owners. In this case, users who are not authenticated fall
  under the ACL's <code>default</code> scope.</p>
<p>When <code>api_visible</code> is <strong>false</strong>, only a map's owner
  can access that map through the API.</p>

<h3>Default Values</h3>
<p>A map's <code>api_visible</code> custom property is set at creation according
  to the method of creation:</p>

<ul>
  <li>Maps created with the API have <code>api_visible</code> set to
    <strong>true</strong>.</li>
  <li>Maps created using the My Maps web interface have <code>api_visible</code>
    set to <strong>false</strong>.</li>
</ul>

<p class="note"><strong>Note</strong>: <em>All</em> maps created <strong>before
  December 16th, 2009</strong> were created with <code>api_visible</code> set to
  <strong>false</strong>.</p>

<h3>Updating the api_visible Custom Property</h3>
<p>To update the <code>api_visible</code> custom property, call
  <code>addCustomProperty()</code> on the map entry, passing it the  arguments
  show below; then, call <code>updateEntry()</code> on the map entry, passing it
  a function to call upon successful update, and a function to call should the
  update fail.</p>

<pre class="prettyprint lang-js">service.getMapEntry(mapUrl, function(entryRoot) {
  var entry = entryRoot.entry;
  entry.addCustomProperty({name:'api_visible', value:'1'}); // value:'0' for false.
  entry.updateEntry(function() {window.location.reload()}, errorHandler);
}, errorCB);
</pre>

<h2 id="access_control_lists">Access Control Lists</h2>

<p>The Google Data API provides methods to control access to your maps.
  Individual users can be granted  priviledges, and a default access level can
  be set for all users not specifically named.</p>
<p>Access control is accomplished using the <code>google.gdata.acl</code> class.
  Each map  has one ACL feed, containing one or more ACL entries. Each entry
  specifies a <strong>scope</strong> and a <strong>role</strong>; the
  <strong>scope</strong> defines the user affected, and the
  <strong>role</strong> defines their access level. All feeds contain an entry
  for the <code>default</code> scope, which applies to all users without their
  own entry.</p>
<h3 id="scopes_and_roles">Scopes and Roles</h3>

<p>Allowed scopes in the Maps Data API are:</p>
<ul>
  <li><strong>default</strong>: everyone</li>
  <li><strong>user</strong>: a user can be specified with their email address
    (eg. <em>mike@gmail.com</em>) or by their <em>userID</em>.</li>
</ul>
<p>Allowed roles are explained in the table below.</p>

<table class="nowrap">
  <tr>
    <th>Role</th>
    <th>Map</th>
    <th>Features</th>
    <th>ACL</th>
  </tr>
  <tr>
    <td><code>owner</code><br />(not valid with <code>default</code> scope)</td>
    <td>View&nbsp;-&nbsp;Edit</td>
    <td>View&nbsp;-&nbsp;Add&nbsp;-&nbsp;Edit&nbsp;-&nbsp;Delete</td>
    <td>View&nbsp;-&nbsp;Edit</td>
  </tr>
  <tr class="alt">
    <td><code>reader</code></td>
    <td>View</td>
    <td>View</td>
    <td>View</td>
  </tr>
  <tr>
    <td><code>writer</code></td>
    <td>View&nbsp;-&nbsp;Edit</td>
    <td>View&nbsp;-&nbsp;Add&nbsp;-&nbsp;Edit&nbsp;-&nbsp;Delete</td>
    <td>View</td>
  </tr>
  <tr class="alt">
    <td><code>appender</code></td>
    <td>-</td>
    <td>Add</td>
    <td>-</td>
  </tr>
  <tr>
    <td><code>readappender</code></td>
    <td>View</td>
    <td>View&nbsp;-&nbsp;Add</td>
    <td>View</td>
  </tr>
  <tr class="alt">
    <td><code>default</code></td>
    <td colspan="3">Explicitly grants a user the same role as is granted the
      default scope.</td>
  </tr>
  <tr>
    <td><code>none</code></td>
    <td colspan="3">Assigning a role of <code>none</code> to a user will remove
      that user's ACL entry.</td>
  </tr>
</table>

<h4 id="creators">Special Rules for Map Creators</h4>
<p>The creator of a map  always has full permission to the map, its features,
  and its ACL, regardless of any changes to the owner's ACL entry. A map can
  only be deleted by its creator.</p>

<h3 id="retrieving_an_acl">Retrieving an ACL</h3>

<p>A map's ACL can be retrieved with its unique URL. This URL can be inferred
  from the map entry's <code>id</code> property, as follows:</p>
<pre class="prettyprint">var aclFeedURL = mapEntry.getId().$t.replace('feeds\/maps', 'feeds\/acl\/maps') + '\/full';</pre>
<p><code>getAclFeed()</code> takes the ACL feed URL, a function to be called
  upon successful retrieval, and an error handler. Upon success,
  <code>getAclFeed()</code> passes a <code>feedRoot</code> object to the
  continuation function.</p>

<pre class="prettyprint lang-js">service.getAclFeed(aclFeedURL, continuation_func, errorHandler);

function continuation_func(feedRoot) {
  var aclEntries = feedRoot.feed.getEntries();
  for (var i = 0; i &lt; aclEntries.length; i++) {
    var aclEntry = aclEntries[i];
}
</pre>

<h3 id="retrieving_an_acl_entry">Retrieving an ACL Entry</h3>

<p>An individual ACL entry's feed can be retrieved by calling
  <code>getAclEntry()</code> on the entry's unique URL. This URL can be obtained
  by calling <code>getSelfLink().getHref()</code> on the ACL entry, or can be
  constructed by appending the scope type and scope value to the ACL feed URL,
  as shown in the following example:</p>

<pre class="prettyprint">
function retrieveAclEntry(aclFeedURL) {
  var aclEntryURL = aclFeedURL +
                  '/user%3Ajohn%40gmail.com'; // URL-encoded scope_type:scope_value
  service.getAclEntry(aclEntryURL, showAclEntry, errorHandler);
}
</pre>

<p><code>getAclEntry()</code> passes an <code>entryRoot</code> object to the continuation function:</p>

<pre class="prettyprint">
function showAclEntry(entryRoot) {
  var entry = entryRoot.entry;
  var scopeType = entry.getScope().getType();
  var scopeValue = entry.getScope().getValue();
  var roleValue = entry.getRole().getValue();
  alert(scopeType + '\n' + scopeValue + '\n' + roleValue);
}
</pre>

<h3 id="adding_an_acl_entry">Adding  an ACL Entry</h3>

<p>ACL entries are inserted into the ACL feed by calling
  <code>insertEntry()</code> on the <code>MapsService</code> object.
  <code>insertEntry()</code> in this case takes the following parameters:</p>

<ul>
  <li>The map's ACL feed URL.</li>
  <li>The <code>google.gdata.acl.AclEntry</code> object.</li>
  <li>A continuation function. If the insert is successful, the inserted entry's
    <code>entryRoot</code> will be passed to this function.</li>
  <li>A function to be called if the insert is not successful.</li>
  <li>The class constructor - in this case, <code>google.gdata.AclEntry</code>.
  </li>
</ul>

<pre class="prettyprint">
function addAclEntry() {
  var entry = new google.gdata.acl.AclEntry();

  var role = new google.gdata.acl.AclRole();
  role.setValue('owner');
  entry.setRole(role);

  var scope = new google.gdata.acl.AclScope();
  scope.setType('user');
  scope.setValue('bob@gmail.com');
  entry.setScope(scope);

  service.insertEntry(aclFeedURL, entry, showNewEntryURL, errorHandler, google.gdata.AclEntry);
}

function showNewEntryURL(entryRoot) {
  var entry = entryRoot.entry;
  var aclEntryURL = entry.getSelfLink().getHref();
  alert(aclEntryURL);
}</pre>

<h3 id="updating_an_acl_entry">Updating an ACL Entry</h3>

<p>ACL entries can be updated by calling <code>updateEntry()</code> on the
  <code>entry</code> object. <code>updateEntry()</code> takes a function to call
  upon successful update, and a function to be called if the update fails. </p>
<p>Only the role value of an entry can be changed; scope can not be updated.</p>

<pre class="prettyprint">
function changeRole(aclEntry) {
  var role = aclEntry.getRole();
  role.setValue('appender');
  aclEntry.setRole(newRole);
  aclEntry.updateEntry(displayNewRole, errorHandler);
}

function displayNewRole(entryRoot) {
  var entry = entryRoot.entry;
  var role = entry.getRole().getValue();
  alert(role);
}
</pre>

<h3 id="deleting_an_acl_entry">Deleting an ACL Entry</h3>

<p>To remove an entry from an ACL, call <code>deleteEntry()</code> on the
  <code>entry</code> object,passing a function to be called upon successful
  deletion of the entry, and a function to be called if the deletion is
  unsuccessful.</p>
<p><code>deleteEntry()</code> will pass the deleted entry's
  <code>entryRoot</code> object to the continuation function.</p>

<pre class="prettyprint">function deleteAclEntry(entry) {
  entry.deleteEntry(notifyDeleted, errorHandler);
}

function notifyDeleted(entryRoot) {
  var entry = entryRoot.entry;
  alert(&quot;The &quot; + entry.getScope().getValue() +
        &quot; scope has been deleted.&quot;);
}</pre>

<h1 id="debugging">Debugging</h1>
<p>A JavaScript debugger is highly recommended while developing. Some free
  debuggers include <a href="http://www.getfirebug.com/">Firebug</a> for
  Firefox,
  <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=2f465be0-94fd-4569-b3c4-dffdf19ccd99&amp;DisplayLang=en">
  Microsoft Script Debugger</a> for IE, and the built-in tools in
  <a href="http://www.apple.com/safari/features.html#developer">Safari</a> and
  <a href="http://www.google.com/chrome/intl/en/webmasters-faq.html#tools">
  Google Chrome</a>.</p>
<p>Many methods call for an error handler function as a parameter. If an error
  occurs when calling one of these methods, the browser's <code>Error</code>
  object will be passed to your specified error handler. If the error is from an
  HTTP response, it will include a <code>cause</code> parameter. You can use the
  information from the <code>Error</code> object to help troubleshoot your
  application.</p>

<pre class="prettyprint lang-js">
function errorHandler(e) {
  var errorDiv = document.createElement('div');
  document.body.appendChild(errorDiv);
  if (e instanceof Error) {
    errorDiv.innerHTML = 'Error on line ' + e.lineNumber + ' in ' + e.fileName
                       + '\nMessage: ' + e.message;
    if (e.cause) {
      errorDiv.innerHTML = errorDiv.innerHTML + '&lt;br /&gt;Root cause: HTTP error '
                         + e.cause.status + ': ' + e.cause.statusText;
    }
  } else {
    alert(e.toString());
  }
}
</pre>

<h1 id="more_resources">More Resources</h1>

<p>More information about the Google Maps Data API and/or the Google Data
  JavaScript client is available from the following sources:</p>
<ul>
  <li>The <a href="http://groups.google.com/group/google-maps-data-api">
    Google Maps Data API group</a> on Google Groups</li>
  <li>The
    <a href="http://groups.google.com/group/google-data-javascript-client">
      Google Data JavaScript Client group</a> on Google Groups</li>
  <li>The <a href="http://code.google.com/p/gdata-javascript-client/">
    gdata-javascript-client</a> project on Google Code.</li>
</ul>

<p class="backtotop"><a href="#top">Back to top</a></p>



      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
    &copy;2010 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://code.google.com/terms.html">Terms of Service</a> -
    <a href="http://code.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://code.google.com/more">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="http://code.google.com/intl/en">English</a> -
    <a href="http://code.google.com/intl/es">Español</a> -
    <a href="http://code.google.com/intl/ja">日本語</a> -
    <a href="http://code.google.com/intl/ko">한국어</a> -
    <a href="http://code.google.com/intl/pt-BR">Português</a> -
    <a href="http://code.google.com/intl/ru">Pусский</a> -
    <a href="http://code.google.com/intl/zh-CN">中文(简体)</a> -
    <a href="http://code.google.com/intl/zh-TW">中文(繁體)</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="../../../../js/codesite_tail.pack.04102009.js" type="text/javascript"></script>




<script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._setCookiePath', window.location.pathname.substring(0,
        window.location.pathname.lastIndexOf('/') + 1)],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');

  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'http://www.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>




  </body>
</html>
